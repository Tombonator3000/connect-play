@import url('https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&family=Crimson+Pro:ital,wght@0,400;0,600;1,400&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Shadows of the 1920s - Lovecraftian Horror Design System */

@layer base {
  :root {
    /* Core palette - Dark cosmic horror */
    --background: 230 25% 3%;
    --foreground: 40 20% 80%;
    
    --card: 230 30% 8%;
    --card-foreground: 40 20% 85%;
    
    --popover: 230 30% 6%;
    --popover-foreground: 40 20% 80%;
    
    /* Blood red accent */
    --primary: 348 75% 50%;
    --primary-foreground: 40 20% 95%;
    
    /* Eldritch purple */
    --secondary: 280 50% 20%;
    --secondary-foreground: 280 30% 85%;
    
    --muted: 230 20% 12%;
    --muted-foreground: 40 10% 50%;
    
    /* Amber/sepia accents */
    --accent: 35 80% 45%;
    --accent-foreground: 35 20% 95%;
    
    --destructive: 0 72% 45%;
    --destructive-foreground: 0 0% 98%;
    
    --border: 35 30% 20%;
    --input: 230 25% 15%;
    --ring: 348 75% 50%;
    
    --radius: 0.75rem;
    
    /* Custom game tokens */
    --doom: 348 75% 50%;
    --sanity: 280 60% 55%;
    --health: 0 70% 45%;
    --insight: 200 80% 55%;
    --sepia: 35 50% 65%;
    --parchment: 35 40% 85%;
    --leather: 25 40% 12%;
    --gold: 45 90% 55%;
    
    /* Gradients */
    --gradient-doom: linear-gradient(135deg, hsl(348 75% 40%), hsl(0 60% 35%));
    --gradient-sanity: linear-gradient(135deg, hsl(280 50% 30%), hsl(300 60% 45%));
    --gradient-eldritch: linear-gradient(180deg, hsl(230 25% 3%) 0%, hsl(280 30% 8%) 100%);
    --gradient-vignette: radial-gradient(circle at center, transparent 30%, rgba(0,0,0,0.8) 100%);
    
    /* Shadows */
    --shadow-doom: 0 0 30px hsla(348, 75%, 50%, 0.4);
    --shadow-glow: 0 0 20px hsla(35, 80%, 45%, 0.3);
  }

  .dark {
    --background: 230 25% 3%;
    --foreground: 40 20% 80%;
    --card: 230 30% 8%;
    --card-foreground: 40 20% 85%;
    --popover: 230 30% 6%;
    --popover-foreground: 40 20% 80%;
    --primary: 348 75% 50%;
    --primary-foreground: 40 20% 95%;
    --secondary: 280 50% 20%;
    --secondary-foreground: 280 30% 85%;
    --muted: 230 20% 12%;
    --muted-foreground: 40 10% 50%;
    --accent: 35 80% 45%;
    --accent-foreground: 35 20% 95%;
    --destructive: 0 72% 45%;
    --destructive-foreground: 0 0% 98%;
    --border: 35 30% 20%;
    --input: 230 25% 15%;
    --ring: 348 75% 50%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Crimson Pro', serif;
  }

  /* Mobile Touch Optimization - Remove 300ms tap delay */
  html {
    touch-action: manipulation;
  }

  /* Prevent text selection during gameplay */
  .game-board-container {
    -webkit-user-select: none;
    user-select: none;
    -webkit-touch-callout: none;
  }

  /* Smooth touch scrolling for game elements */
  .touch-scroll {
    -webkit-overflow-scrolling: touch;
  }
}

@layer components {
  /* Custom scrollbar */
  .custom-scrollbar::-webkit-scrollbar {
    width: 6px;
  }
  .custom-scrollbar::-webkit-scrollbar-track {
    background: hsl(var(--leather));
  }
  .custom-scrollbar::-webkit-scrollbar-thumb {
    background: hsl(var(--border));
    border-radius: 3px;
  }
  
  /* Hex clip path */
  .hex-clip {
    clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
  }
  
  /* Hide scrollbar utility */
  .hide-scrollbar::-webkit-scrollbar {
    display: none;
  }
  .hide-scrollbar {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  
  /* Text stroke for important text */
  .text-stroke-sm {
    -webkit-text-stroke: 0.5px rgba(0,0,0,0.5);
  }
  
  /* Font display for titles */
  .font-display {
    font-family: 'Cinzel Decorative', serif;
  }

  /* ==========================================================================
     BOARD GAME AESTHETIC - Oil Painting Tile System
     ========================================================================== */

  /* Chiaroscuro lighting overlay - subtle shadow effect for depth */
  /* FIXED: Reduced opacity to prevent tiles from appearing black */
  .chiaroscuro-overlay {
    background: radial-gradient(
      ellipse at 30% 30%,
      transparent 0%,
      rgba(0, 0, 0, 0.1) 60%,
      rgba(0, 0, 0, 0.25) 100%
    );
    mix-blend-mode: soft-light;
  }

  /* Oil painting texture - subtle canvas effect */
  .oil-texture {
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)' opacity='0.08'/%3E%3C/svg%3E");
    mix-blend-mode: overlay;
  }

  /* ==========================================================================
     TILE FLOOR TEXTURES - Fallback backgrounds when no image
     FIX 2026-01-24: Significantly increased lightness (35-45%) to prevent
     tiles from appearing black when player moves away. Previous values
     (18-28%) were too dark, especially combined with fog overlay.
     ========================================================================== */

  /* Dark wood flooring - manor, library, study */
  .tile-darkwood {
    background: linear-gradient(
      135deg,
      hsl(25 30% 38%) 0%,
      hsl(25 25% 32%) 50%,
      hsl(25 35% 35%) 100%
    );
  }

  /* Cobblestone - streets, squares, markets */
  .tile-cobblestone {
    background:
      radial-gradient(ellipse at 20% 30%, hsl(230 15% 42%) 0%, transparent 40%),
      radial-gradient(ellipse at 80% 70%, hsl(230 15% 38%) 0%, transparent 40%),
      linear-gradient(180deg, hsl(230 20% 36%) 0%, hsl(230 15% 32%) 100%);
  }

  /* Stone flooring - church, crypt, basement */
  .tile-stone {
    background: linear-gradient(
      145deg,
      hsl(230 15% 40%) 0%,
      hsl(230 10% 35%) 50%,
      hsl(230 20% 38%) 100%
    );
  }

  /* Carpet/rug - library, manor rooms */
  .tile-carpet {
    background: linear-gradient(
      135deg,
      hsl(348 40% 38%) 0%,
      hsl(348 35% 34%) 50%,
      hsl(348 30% 32%) 100%
    );
  }

  /* Marble flooring - museum, grand halls */
  .tile-marble {
    background: linear-gradient(
      160deg,
      hsl(210 10% 45%) 0%,
      hsl(210 5% 40%) 50%,
      hsl(210 10% 42%) 100%
    );
  }

  /* Water/dock areas */
  .tile-water {
    background: linear-gradient(
      180deg,
      hsl(200 40% 35%) 0%,
      hsl(200 50% 30%) 50%,
      hsl(200 35% 38%) 100%
    );
  }

  /* Clean tile flooring - Hospital, Asylum, Morgue, Lab */
  .tile-tile {
    background:
      repeating-linear-gradient(
        90deg,
        hsl(210 8% 42%) 0px,
        hsl(210 8% 42%) 20px,
        hsl(210 8% 38%) 20px,
        hsl(210 8% 38%) 21px
      ),
      repeating-linear-gradient(
        0deg,
        hsl(210 8% 42%) 0px,
        hsl(210 8% 42%) 20px,
        hsl(210 8% 38%) 20px,
        hsl(210 8% 38%) 21px
      ),
      linear-gradient(
        135deg,
        hsl(210 10% 40%) 0%,
        hsl(210 6% 36%) 100%
      );
  }

  /* Grass texture - Park, Cemetery, Forest edge */
  .tile-grass {
    background:
      radial-gradient(ellipse at 20% 40%, hsl(130 35% 35%) 0%, transparent 40%),
      radial-gradient(ellipse at 70% 30%, hsl(120 30% 32%) 0%, transparent 35%),
      radial-gradient(ellipse at 50% 80%, hsl(140 35% 38%) 0%, transparent 45%),
      linear-gradient(
        180deg,
        hsl(125 30% 34%) 0%,
        hsl(130 25% 30%) 50%,
        hsl(120 35% 36%) 100%
      );
  }

  /* Dirt texture - Forest, Path, Cave */
  /* Dirt texture - Forest, Path, Cave */
  .tile-dirt {
    background:
      radial-gradient(ellipse at 30% 25%, hsl(30 35% 34%) 0%, transparent 30%),
      radial-gradient(ellipse at 75% 60%, hsl(25 30% 30%) 0%, transparent 35%),
      radial-gradient(ellipse at 45% 85%, hsl(35 40% 36%) 0%, transparent 40%),
      linear-gradient(
        145deg,
        hsl(30 30% 34%) 0%,
        hsl(25 25% 30%) 50%,
        hsl(35 35% 32%) 100%
      );
  }

  /* Ritual flooring - Occult symbols, Ritual Chamber, Altar, Portal */
  .tile-ritual {
    background:
      radial-gradient(circle at 50% 50%, hsla(280 60% 45% / 0.4) 0%, transparent 60%),
      conic-gradient(
        from 0deg at 50% 50%,
        hsla(280 50% 38% / 0.3) 0deg,
        hsla(348 60% 42% / 0.3) 90deg,
        hsla(280 50% 38% / 0.3) 180deg,
        hsla(348 60% 42% / 0.3) 270deg,
        hsla(280 50% 38% / 0.3) 360deg
      ),
      linear-gradient(
        135deg,
        hsl(280 40% 34%) 0%,
        hsl(300 35% 30%) 50%,
        hsl(280 45% 36%) 100%
      );
    animation: ritual-pulse 4s ease-in-out infinite;
  }

  @keyframes ritual-pulse {
    0%, 100% {
      filter: brightness(1);
      box-shadow: inset 0 0 30px hsla(280, 60%, 40%, 0.15);
    }
    50% {
      filter: brightness(1.1);
      box-shadow: inset 0 0 50px hsla(280, 60%, 50%, 0.25);
    }
  }

  /* ==========================================================================
     GLOW EFFECTS - Atmospheric lighting
     ========================================================================== */

  /* Gaslight warm glow */
  .gaslight-glow {
    box-shadow: inset 0 0 30px hsla(35, 80%, 45%, 0.15);
  }

  /* Ritual eldritch glow */
  .ritual-glow {
    box-shadow: inset 0 0 40px hsla(280, 60%, 40%, 0.2);
  }

  /* Supernatural green glow */
  .eldritch-glow {
    box-shadow: inset 0 0 35px hsla(120, 40%, 30%, 0.15);
  }

  /* Gaslight animation */
  .animate-gaslight {
    animation: gaslight-pulse 4s ease-in-out infinite;
  }

  @keyframes gaslight-pulse {
    0%, 100% { box-shadow: inset 0 0 30px hsla(35, 80%, 45%, 0.15); }
    50% { box-shadow: inset 0 0 40px hsla(35, 80%, 50%, 0.25); }
  }
}

@layer utilities {
  /* Animations */
  @keyframes float-up {
    0% {
      opacity: 1;
      transform: translateY(0);
    }
    100% {
      opacity: 0;
      transform: translateY(-60px);
    }
  }
  
  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    10% { transform: translateX(-8px) rotate(-1deg); }
    20% { transform: translateX(8px) rotate(1deg); }
    30% { transform: translateX(-8px) rotate(-1deg); }
    40% { transform: translateX(8px) rotate(1deg); }
    50% { transform: translateX(-4px); }
  }
  
  @keyframes doom-flicker {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 0.5; }
  }
  
  @keyframes lantern {
    0%, 100% { opacity: 0.15; transform: scale(4); }
    50% { opacity: 0.25; transform: scale(4.5); }
  }
  
  @keyframes wiggle {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(-10deg); }
    75% { transform: rotate(10deg); }
  }
  
  @keyframes particle {
    0% {
      opacity: 1;
      transform: translate(0, 0) scale(1);
    }
    100% {
      opacity: 0;
      transform: translate(var(--tx), var(--ty)) scale(0.5);
    }
  }
  
  .animate-float-up {
    animation: float-up 2s ease-out forwards;
  }
  
  .animate-shake {
    animation: shake 0.5s ease-in-out;
  }
  
  .animate-lantern {
    animation: lantern 3s ease-in-out infinite;
  }
  
  .animate-wiggle {
    animation: wiggle 0.5s ease-in-out;
  }
  
  .particle {
    position: absolute;
    left: 50%;
    top: 50%;
    animation: particle 1s ease-out forwards;
  }
  
  /* Madness visual effects - Complete from Game Design Bible */
  .madness-hallucination {
    animation: hallucinate 4s ease-in-out infinite;
  }
  
  @keyframes hallucinate {
    0%, 100% { filter: hue-rotate(0deg); }
    50% { filter: hue-rotate(30deg) blur(1px); }
  }
  
  .madness-paranoia {
    animation: paranoia 2s ease-in-out infinite;
  }
  
  @keyframes paranoia {
    0%, 100% { filter: saturate(1) sepia(0); }
    50% { filter: saturate(1.5) sepia(0.3); }
  }

  .madness-hysteria {
    animation: hysteria-pulse 0.5s ease-in-out infinite;
  }
  
  @keyframes hysteria-pulse {
    0%, 100% { transform: translateX(0); }
    25% { transform: translateX(-2px) rotate(-0.5deg); }
    75% { transform: translateX(2px) rotate(0.5deg); }
  }
  
  .madness-catatonia {
    filter: saturate(0.5) brightness(0.8);
    transition: all 0.5s ease;
  }
  
  .madness-obsession .interactable {
    animation: obsession-glow 1.5s ease-in-out infinite;
  }
  
  @keyframes obsession-glow {
    0%, 100% { box-shadow: 0 0 5px hsl(var(--gold)); }
    50% { box-shadow: 0 0 20px hsl(var(--gold)); }
  }
  
  .madness-amnesia {
    position: relative;
  }
  
  .madness-amnesia::after {
    content: '';
    position: fixed;
    inset: 0;
    background: radial-gradient(circle at center, transparent 20%, rgba(0,0,0,0.5) 100%);
    pointer-events: none;
    animation: amnesia-fog 3s ease-in-out infinite;
  }
  
  @keyframes amnesia-fog {
    0%, 100% { opacity: 0.7; }
    50% { opacity: 0.9; }
  }
  
  .madness-night-terrors {
    animation: night-terrors 5s ease-in-out infinite;
  }
  
  @keyframes night-terrors {
    0%, 90%, 100% { filter: brightness(1); }
    92% { filter: brightness(1.5); }
    94% { filter: brightness(0.7); }
  }
  
  .madness-dark-insight {
    animation: dark-insight 3s ease-in-out infinite;
  }
  
  @keyframes dark-insight {
    0%, 100% {
      filter: hue-rotate(0deg);
      box-shadow: inset 0 0 50px hsla(280, 60%, 50%, 0.2);
    }
    50% {
      filter: hue-rotate(10deg);
      box-shadow: inset 0 0 80px hsla(280, 60%, 50%, 0.4);
    }
  }

  /* Overlay animations */
  @keyframes fadeIn {
    0% { opacity: 0; }
    100% { opacity: 1; }
  }

  @keyframes float {
    0%, 100% {
      transform: translateY(0px);
      opacity: 0.4;
    }
    50% {
      transform: translateY(-20px);
      opacity: 0.7;
    }
  }

  .animate-fadeIn {
    animation: fadeIn 0.5s ease-out forwards;
  }

  .animate-float {
    animation: float 4s ease-in-out infinite;
  }

  /* ==========================================================================
     MOBILE TOUCH FEEDBACK ANIMATIONS
     ========================================================================== */

  /* Tap ripple effect for tiles */
  @keyframes tap-ripple {
    0% {
      transform: scale(0.8);
      opacity: 0.8;
    }
    100% {
      transform: scale(1.5);
      opacity: 0;
    }
  }

  .tap-ripple {
    position: absolute;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background: radial-gradient(circle, rgba(255, 215, 0, 0.4) 0%, transparent 70%);
    animation: tap-ripple 0.4s ease-out forwards;
    pointer-events: none;
  }

  /* Touch highlight pulse for hex tiles */
  @keyframes touch-pulse {
    0% {
      box-shadow: inset 0 0 0 0 hsla(45, 100%, 50%, 0);
    }
    50% {
      box-shadow: inset 0 0 30px 5px hsla(45, 100%, 50%, 0.3);
    }
    100% {
      box-shadow: inset 0 0 0 0 hsla(45, 100%, 50%, 0);
    }
  }

  .touch-highlight {
    animation: touch-pulse 0.3s ease-out forwards;
  }

  /* ==========================================================================
     MOBILE MOVEMENT ENHANCEMENT - Valid Move Tiles
     ========================================================================== */

  /* Valid move tile - shows where player can move on touch devices */
  @keyframes valid-move-pulse {
    0%, 100% {
      box-shadow: inset 0 0 12px 2px hsla(120, 70%, 50%, 0.15);
    }
    50% {
      box-shadow: inset 0 0 20px 4px hsla(120, 70%, 50%, 0.3);
    }
  }

  .valid-move-tile {
    position: relative;
  }

  .valid-move-tile::after {
    content: '';
    position: absolute;
    inset: 0;
    clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
    border: 2px solid hsla(120, 60%, 50%, 0.4);
    background: transparent;
    pointer-events: none;
    z-index: 50;
    animation: valid-move-pulse 2s ease-in-out infinite;
  }

  /* Selected move target - when long-pressing or selecting a destination */
  @keyframes selected-target-glow {
    0%, 100% {
      box-shadow:
        inset 0 0 15px 3px hsla(45, 90%, 50%, 0.4),
        0 0 20px 5px hsla(45, 90%, 50%, 0.3);
    }
    50% {
      box-shadow:
        inset 0 0 25px 5px hsla(45, 90%, 50%, 0.6),
        0 0 30px 8px hsla(45, 90%, 50%, 0.5);
    }
  }

  .selected-move-target::after {
    content: '';
    position: absolute;
    inset: 0;
    clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
    border: 3px solid hsla(45, 90%, 50%, 0.8);
    background: hsla(45, 90%, 50%, 0.1);
    pointer-events: none;
    z-index: 51;
    animation: selected-target-glow 1s ease-in-out infinite;
  }

  /* Long-press preview - visual feedback during hold */
  @keyframes long-press-fill {
    0% {
      background: hsla(200, 80%, 50%, 0);
    }
    100% {
      background: hsla(200, 80%, 50%, 0.3);
    }
  }

  .long-press-preview::before {
    content: '';
    position: absolute;
    inset: 0;
    clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
    background: hsla(200, 80%, 50%, 0.25);
    border: 2px solid hsla(200, 80%, 60%, 0.8);
    pointer-events: none;
    z-index: 52;
    animation: long-press-fill 0.4s ease-out forwards;
  }

  /* Movement arrow indicator for touch devices */
  @keyframes move-arrow-bounce {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-4px);
    }
  }

  .move-arrow-indicator {
    animation: move-arrow-bounce 0.8s ease-in-out infinite;
  }

  /* Explore tile adjacent to active player - enhanced visibility for mobile */
  @keyframes explore-pulse {
    0%, 100% {
      box-shadow:
        inset 0 0 10px 2px hsla(348, 75%, 50%, 0.2),
        0 0 15px 3px hsla(348, 75%, 50%, 0.15);
    }
    50% {
      box-shadow:
        inset 0 0 18px 4px hsla(348, 75%, 50%, 0.35),
        0 0 25px 6px hsla(348, 75%, 50%, 0.25);
    }
  }

  .explore-tile-adjacent {
    animation: explore-pulse 1.5s ease-in-out infinite;
  }

  /* Tile press effect - subtle scale down */
  .tile-pressed {
    transform: scale(0.96);
    filter: brightness(1.15);
    transition: transform 0.1s ease-out, filter 0.1s ease-out;
  }

  /* ==========================================================================
     WEATHER SYSTEM ANIMATIONS - "The Whispering Elements"
     ========================================================================== */

  /* FOG - Drifting cloud particles */
  @keyframes fog-drift {
    0% {
      transform: translateX(-100%) translateY(0) scale(1);
      opacity: 0;
    }
    10% {
      opacity: 1;
    }
    90% {
      opacity: 1;
    }
    100% {
      transform: translateX(200%) translateY(-20px) scale(1.2);
      opacity: 0;
    }
  }

  .animate-fog-drift {
    animation: fog-drift 20s linear infinite;
  }

  /* RAIN - Falling rain streaks */
  @keyframes rain-fall {
    0% {
      transform: translateY(-100px) rotate(15deg);
      opacity: 0;
    }
    10% {
      opacity: 1;
    }
    90% {
      opacity: 1;
    }
    100% {
      transform: translateY(100vh) rotate(15deg);
      opacity: 0;
    }
  }

  .animate-rain-fall {
    animation: rain-fall 0.5s linear infinite;
  }

  /* Rain container with diagonal effect */
  .weather-rain {
    background: linear-gradient(
      to bottom right,
      transparent 0%,
      rgba(100, 150, 200, 0.02) 50%,
      transparent 100%
    );
  }

  /* MIASMA - Floating supernatural particles */
  @keyframes miasma-float {
    0%, 100% {
      transform: translate(0, 0) scale(1);
      opacity: 0.3;
    }
    25% {
      transform: translate(20px, -30px) scale(1.1);
      opacity: 0.5;
    }
    50% {
      transform: translate(-10px, -50px) scale(0.9);
      opacity: 0.4;
    }
    75% {
      transform: translate(30px, -20px) scale(1.05);
      opacity: 0.5;
    }
  }

  .animate-miasma-float {
    animation: miasma-float 8s ease-in-out infinite;
  }

  /* Miasma skull glimpses */
  @keyframes miasma-skull {
    0%, 80%, 100% {
      opacity: 0;
      transform: scale(0.8) rotate(-10deg);
    }
    85%, 95% {
      opacity: 0.3;
      transform: scale(1) rotate(0deg);
    }
  }

  .animate-miasma-skull {
    animation: miasma-skull 12s ease-in-out infinite;
  }

  /* COSMIC STATIC - Reality distortion */
  @keyframes cosmic-noise {
    0%, 100% {
      transform: translate(0, 0);
    }
    10% {
      transform: translate(-2px, 1px);
    }
    20% {
      transform: translate(2px, -1px);
    }
    30% {
      transform: translate(-1px, 2px);
    }
    40% {
      transform: translate(1px, -2px);
    }
    50% {
      transform: translate(-2px, -1px);
    }
    60% {
      transform: translate(2px, 1px);
    }
    70% {
      transform: translate(-1px, -2px);
    }
    80% {
      transform: translate(1px, 2px);
    }
    90% {
      transform: translate(-2px, 2px);
    }
  }

  .animate-cosmic-noise {
    animation: cosmic-noise 0.3s steps(10) infinite;
  }

  /* Cosmic glitch bars */
  @keyframes glitch-bar {
    0%, 90%, 100% {
      transform: translateX(-100%);
      opacity: 0;
    }
    92%, 98% {
      transform: translateX(0);
      opacity: 1;
    }
  }

  .animate-glitch-bar {
    animation: glitch-bar 4s ease-in-out infinite;
  }

  /* Cosmic glitch overlay */
  @keyframes cosmic-glitch {
    0%, 95%, 100% {
      opacity: 0;
      transform: translateX(0);
    }
    96% {
      opacity: 0.5;
      transform: translateX(-5px);
    }
    97% {
      opacity: 0.3;
      transform: translateX(5px);
    }
    98% {
      opacity: 0.4;
      transform: translateX(-3px);
    }
    99% {
      opacity: 0.2;
      transform: translateX(3px);
    }
  }

  .animate-cosmic-glitch {
    animation: cosmic-glitch 3s ease-in-out infinite;
  }

  /* Cosmic flicker particles */
  @keyframes cosmic-flicker {
    0%, 100% {
      opacity: 0;
      transform: scale(0);
    }
    10%, 90% {
      opacity: 0.8;
      transform: scale(1);
    }
    50% {
      opacity: 0.3;
      transform: scale(1.2);
    }
  }

  .animate-cosmic-flicker {
    animation: cosmic-flicker 1s ease-in-out infinite;
  }

  /* Weather visual classes for different weather types */
  .weather-fog {
    background: radial-gradient(
      ellipse at center,
      rgba(100, 120, 140, 0.1) 0%,
      rgba(60, 80, 100, 0.2) 50%,
      rgba(40, 60, 80, 0.3) 100%
    );
  }

  .weather-rain {
    background: linear-gradient(
      180deg,
      rgba(40, 60, 80, 0.1) 0%,
      rgba(60, 80, 100, 0.15) 100%
    );
  }

  .weather-miasma {
    background: radial-gradient(
      ellipse at 30% 70%,
      rgba(100, 50, 150, 0.15) 0%,
      transparent 50%
    ),
    radial-gradient(
      ellipse at 70% 30%,
      rgba(50, 100, 50, 0.1) 0%,
      transparent 50%
    );
  }

  .weather-cosmic-static {
    background: radial-gradient(
      circle at center,
      rgba(0, 200, 200, 0.05) 0%,
      rgba(200, 0, 200, 0.05) 50%,
      transparent 100%
    );
  }

  .weather-clear {
    /* No visual effect for clear weather */
  }

  /* ==========================================================================
     AMBIENT DARK CLOUDS - "The Ever-Present Dread"
     Always visible, creating an unsettling atmosphere
     ========================================================================== */

  /* Dark cloud drift - slow, ominous movement */
  @keyframes dark-cloud-drift {
    0% {
      transform: translateX(-100%) translateY(0) scale(1.2);
      opacity: 0;
    }
    5% {
      opacity: 0.15;
    }
    50% {
      transform: translateX(0%) translateY(-10px) scale(1.3);
      opacity: 0.2;
    }
    95% {
      opacity: 0.15;
    }
    100% {
      transform: translateX(100%) translateY(0) scale(1.2);
      opacity: 0;
    }
  }

  /* Secondary cloud layer - different speed for parallax */
  @keyframes dark-cloud-drift-slow {
    0% {
      transform: translateX(-80%) translateY(5px) scale(1.5);
      opacity: 0;
    }
    10% {
      opacity: 0.1;
    }
    50% {
      transform: translateX(10%) translateY(-5px) scale(1.6);
      opacity: 0.15;
    }
    90% {
      opacity: 0.1;
    }
    100% {
      transform: translateX(120%) translateY(5px) scale(1.5);
      opacity: 0;
    }
  }

  /* Subtle pulsing darkness for extra unease */
  @keyframes ambient-dread {
    0%, 100% {
      opacity: 0.02;
    }
    50% {
      opacity: 0.06;
    }
  }

  /* Cloud shadow passing effect */
  @keyframes cloud-shadow-pass {
    0%, 100% {
      opacity: 0;
      transform: translateX(-200%) skewX(-15deg);
    }
    40%, 60% {
      opacity: 0.08;
      transform: translateX(0%) skewX(-15deg);
    }
  }

  .animate-dark-cloud-drift {
    animation: dark-cloud-drift 45s linear infinite;
  }

  .animate-dark-cloud-drift-slow {
    animation: dark-cloud-drift-slow 60s linear infinite;
  }

  .animate-ambient-dread {
    animation: ambient-dread 8s ease-in-out infinite;
  }

  .animate-cloud-shadow {
    animation: cloud-shadow-pass 25s ease-in-out infinite;
  }

  /* Ambient clouds container */
  .ambient-clouds {
    background: linear-gradient(
      180deg,
      rgba(20, 20, 30, 0.1) 0%,
      transparent 30%,
      transparent 70%,
      rgba(20, 20, 30, 0.05) 100%
    );
  }

  /* ==========================================================================
     DARK ROOM SYSTEM - "What Lurks in the Shadows"
     ========================================================================== */

  /* Pulsing darkness effect for dark rooms */
  @keyframes darkness-pulse {
    0%, 100% {
      opacity: 0.9;
    }
    50% {
      opacity: 1;
    }
  }

  /* Swirling darkness tendrils */
  @keyframes darkness-swirl {
    0% {
      transform: scale(1) rotate(0deg);
      filter: hue-rotate(0deg);
    }
    33% {
      transform: scale(1.05) rotate(2deg);
      filter: hue-rotate(10deg);
    }
    66% {
      transform: scale(0.98) rotate(-2deg);
      filter: hue-rotate(-5deg);
    }
    100% {
      transform: scale(1) rotate(0deg);
      filter: hue-rotate(0deg);
    }
  }

  /* Flashlight beam reveal animation */
  @keyframes flashlight-reveal {
    0% {
      clip-path: circle(0% at center);
      opacity: 0;
    }
    50% {
      opacity: 0.5;
    }
    100% {
      clip-path: circle(100% at center);
      opacity: 1;
    }
  }

  /* Discovery shimmer effect */
  @keyframes discovery-shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }

  .animate-darkness-pulse {
    animation: darkness-pulse 3s ease-in-out infinite;
  }

  .animate-darkness-swirl {
    animation: darkness-swirl 8s ease-in-out infinite;
  }

  .animate-flashlight-reveal {
    animation: flashlight-reveal 0.8s ease-out forwards;
  }

  .animate-discovery-shimmer {
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(255, 215, 0, 0.3) 50%,
      transparent 100%
    );
    background-size: 200% 100%;
    animation: discovery-shimmer 1.5s ease-in-out;
  }

  /* Dark room discovered content glow */
  .dark-room-discovered {
    animation: flashlight-reveal 0.8s ease-out forwards;
    box-shadow: 0 0 20px rgba(255, 200, 100, 0.3);
  }

  /* ==========================================================================
     UNNATURAL GLOW - "The Light That Should Not Be"
     Eldritch phosphorescence that reveals too much
     ========================================================================== */

  @keyframes unnatural-pulse {
    0%, 100% {
      opacity: 0.3;
      filter: hue-rotate(0deg) brightness(1);
    }
    25% {
      opacity: 0.5;
      filter: hue-rotate(30deg) brightness(1.2);
    }
    50% {
      opacity: 0.4;
      filter: hue-rotate(-20deg) brightness(1.1);
    }
    75% {
      opacity: 0.6;
      filter: hue-rotate(15deg) brightness(1.3);
    }
  }

  @keyframes glow-flicker {
    0%, 100% {
      opacity: 0.6;
      transform: scale(1);
    }
    10% {
      opacity: 0.8;
      transform: scale(1.1);
    }
    20% {
      opacity: 0.4;
      transform: scale(0.95);
    }
    30% {
      opacity: 0.7;
      transform: scale(1.05);
    }
    50% {
      opacity: 0.5;
      transform: scale(1);
    }
    70% {
      opacity: 0.9;
      transform: scale(1.15);
    }
    85% {
      opacity: 0.3;
      transform: scale(0.9);
    }
  }

  @keyframes color-shift {
    0%, 100% {
      background: radial-gradient(circle at 30% 30%, rgba(0, 255, 100, 0.1), transparent 60%);
    }
    33% {
      background: radial-gradient(circle at 70% 50%, rgba(100, 255, 200, 0.15), transparent 60%);
    }
    66% {
      background: radial-gradient(circle at 50% 70%, rgba(150, 255, 100, 0.1), transparent 60%);
    }
  }

  .animate-unnatural-pulse {
    animation: unnatural-pulse 6s ease-in-out infinite;
  }

  .animate-glow-flicker {
    animation: glow-flicker 4s ease-in-out infinite;
  }

  .animate-color-shift {
    animation: color-shift 10s ease-in-out infinite;
  }

  .weather-unnatural-glow {
    background: radial-gradient(
      ellipse at center,
      rgba(100, 255, 150, 0.08) 0%,
      rgba(150, 255, 100, 0.05) 30%,
      rgba(50, 200, 100, 0.03) 60%,
      transparent 100%
    );
  }

  /* ==========================================================================
     CONSUMING DARKNESS - "The Void That Hungers"
     Oppressive, light-eating darkness
     ========================================================================== */

  @keyframes darkness-creep {
    0%, 100% {
      opacity: 0.8;
      transform: scale(1);
    }
    50% {
      opacity: 0.9;
      transform: scale(1.02);
    }
  }

  @keyframes darkness-tendril {
    0% {
      transform: translateY(100%) scaleY(0.5);
      opacity: 0;
    }
    20% {
      opacity: 0.6;
    }
    50% {
      transform: translateY(0%) scaleY(1);
      opacity: 0.4;
    }
    80% {
      opacity: 0.5;
    }
    100% {
      transform: translateY(-100%) scaleY(0.5);
      opacity: 0;
    }
  }

  @keyframes void-flicker {
    0%, 95%, 100% {
      opacity: 0;
    }
    96%, 98% {
      opacity: 0.15;
    }
  }

  .animate-darkness-creep {
    animation: darkness-creep 8s ease-in-out infinite;
  }

  .animate-darkness-tendril {
    animation: darkness-tendril 12s ease-in-out infinite;
  }

  .animate-void-flicker {
    animation: void-flicker 5s ease-in-out infinite;
  }

  .weather-darkness {
    background: radial-gradient(
      circle at center,
      rgba(0, 0, 0, 0.3) 0%,
      rgba(0, 0, 0, 0.5) 40%,
      rgba(0, 0, 0, 0.7) 70%,
      rgba(0, 0, 0, 0.85) 100%
    );
  }

  /* ==========================================================================
     SPELL PARTICLE EFFECTS - "The Arcane Manifestations"
     Visual effects for magic spells
     ========================================================================== */

  /* WITHER - Dark purple energy drain projectile */
  @keyframes wither-projectile {
    0% {
      transform: translate(0, 0) scale(1);
      opacity: 1;
      filter: blur(0px);
    }
    50% {
      transform: translate(var(--tx), var(--ty)) scale(1.2);
      opacity: 0.9;
      filter: blur(1px);
    }
    100% {
      transform: translate(calc(var(--tx) * 2), calc(var(--ty) * 2)) scale(0.8);
      opacity: 0;
      filter: blur(2px);
    }
  }

  @keyframes wither-trail {
    0% {
      transform: scale(1) rotate(0deg);
      opacity: 0.8;
    }
    100% {
      transform: scale(0.2) rotate(180deg);
      opacity: 0;
    }
  }

  .animate-wither-projectile {
    animation: wither-projectile var(--duration, 800ms) ease-out forwards;
  }

  .animate-wither-trail {
    animation: wither-trail 600ms ease-out forwards;
  }

  /* ELDRITCH BOLT - Glowing green/purple eldritch energy */
  @keyframes eldritch-bolt {
    0% {
      transform: translate(0, 0) scale(0.5);
      opacity: 0;
      box-shadow: 0 0 10px rgba(100, 255, 150, 0.8);
    }
    20% {
      transform: translate(calc(var(--tx) * 0.2), calc(var(--ty) * 0.2)) scale(1.2);
      opacity: 1;
      box-shadow: 0 0 30px rgba(100, 255, 150, 1);
    }
    80% {
      transform: translate(calc(var(--tx) * 0.8), calc(var(--ty) * 0.8)) scale(1);
      opacity: 0.9;
      box-shadow: 0 0 25px rgba(150, 100, 255, 0.9);
    }
    100% {
      transform: translate(var(--tx), var(--ty)) scale(1.5);
      opacity: 0;
      box-shadow: 0 0 50px rgba(150, 100, 255, 0.5);
    }
  }

  .animate-eldritch-bolt {
    animation: eldritch-bolt var(--duration, 600ms) ease-in-out forwards;
  }

  /* MEND FLESH - Golden healing sparkles */
  @keyframes mend-sparkle {
    0% {
      transform: translate(0, 0) scale(0);
      opacity: 0;
    }
    30% {
      transform: translate(var(--tx), var(--ty)) scale(1.5);
      opacity: 1;
    }
    100% {
      transform: translate(calc(var(--tx) * 1.5), calc(var(--ty) - 40px)) scale(0);
      opacity: 0;
    }
  }

  @keyframes mend-glow {
    0% {
      box-shadow: 0 0 20px rgba(255, 215, 100, 0.3);
    }
    50% {
      box-shadow: 0 0 60px rgba(255, 215, 100, 0.8);
    }
    100% {
      box-shadow: 0 0 20px rgba(255, 215, 100, 0);
    }
  }

  .animate-mend-sparkle {
    animation: mend-sparkle 1200ms ease-out forwards;
  }

  .animate-mend-glow {
    animation: mend-glow 1000ms ease-in-out forwards;
  }

  /* TRUE SIGHT - Blue mystical eye/sight particles */
  @keyframes true-sight-radiate {
    0% {
      transform: translate(0, 0) scale(0.5) rotate(0deg);
      opacity: 0;
    }
    30% {
      opacity: 1;
    }
    100% {
      transform: translate(var(--tx), var(--ty)) scale(0.2) rotate(360deg);
      opacity: 0;
    }
  }

  @keyframes true-sight-eye {
    0% {
      transform: scale(0);
      opacity: 0;
    }
    30% {
      transform: scale(1.5);
      opacity: 1;
    }
    70% {
      transform: scale(1);
      opacity: 0.8;
    }
    100% {
      transform: scale(2);
      opacity: 0;
    }
  }

  .animate-true-sight-radiate {
    animation: true-sight-radiate 1500ms ease-out forwards;
  }

  .animate-true-sight-eye {
    animation: true-sight-eye 1200ms ease-in-out forwards;
  }

  /* BANISH - Red void implosion */
  @keyframes banish-implode {
    0% {
      transform: translate(var(--tx), var(--ty)) scale(2);
      opacity: 0;
    }
    30% {
      transform: translate(calc(var(--tx) * 0.5), calc(var(--ty) * 0.5)) scale(1.5);
      opacity: 0.8;
    }
    60% {
      opacity: 1;
    }
    100% {
      transform: translate(0, 0) scale(0);
      opacity: 0;
    }
  }

  @keyframes banish-vortex {
    0% {
      transform: rotate(0deg) scale(1.5);
      opacity: 0;
    }
    50% {
      transform: rotate(540deg) scale(1);
      opacity: 1;
    }
    100% {
      transform: rotate(1080deg) scale(0);
      opacity: 0;
    }
  }

  .animate-banish-implode {
    animation: banish-implode 800ms ease-in forwards;
  }

  .animate-banish-vortex {
    animation: banish-vortex 1000ms ease-in forwards;
  }

  /* MIND BLAST - Pink/purple shockwave */
  @keyframes mind-blast-wave {
    0% {
      transform: scale(0.5);
      opacity: 0.8;
      border-width: 8px;
    }
    100% {
      transform: scale(3);
      opacity: 0;
      border-width: 1px;
    }
  }

  @keyframes mind-blast-core {
    0% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.5);
      opacity: 0.8;
    }
    100% {
      transform: scale(0);
      opacity: 0;
    }
  }

  .animate-mind-blast-wave {
    animation: mind-blast-wave 600ms ease-out forwards;
  }

  .animate-mind-blast-core {
    animation: mind-blast-core 400ms ease-out forwards;
  }

  /* DARK SHIELD - Swirling dark protective aura */
  @keyframes dark-shield-orbit {
    0% {
      transform: rotate(0deg) translateX(40px) rotate(0deg);
      opacity: 0;
    }
    20% {
      opacity: 0.8;
    }
    80% {
      opacity: 0.8;
    }
    100% {
      transform: rotate(360deg) translateX(40px) rotate(-360deg);
      opacity: 0;
    }
  }

  @keyframes dark-shield-glow {
    0% {
      box-shadow: inset 0 0 30px rgba(100, 0, 150, 0.3);
    }
    50% {
      box-shadow: inset 0 0 60px rgba(100, 0, 150, 0.6);
    }
    100% {
      box-shadow: inset 0 0 30px rgba(100, 0, 150, 0);
    }
  }

  .animate-dark-shield-orbit {
    animation: dark-shield-orbit 1500ms linear forwards;
  }

  .animate-dark-shield-glow {
    animation: dark-shield-glow 1200ms ease-in-out forwards;
  }

  /* EXPLOSION - Impact burst */
  @keyframes explosion-burst {
    0% {
      transform: translate(0, 0) scale(0);
      opacity: 1;
    }
    50% {
      transform: translate(var(--tx), var(--ty)) scale(1.5);
      opacity: 0.8;
    }
    100% {
      transform: translate(calc(var(--tx) * 1.5), calc(var(--ty) * 1.5)) scale(0.5);
      opacity: 0;
    }
  }

  @keyframes explosion-ring {
    0% {
      transform: scale(0.3);
      opacity: 1;
      border-width: 10px;
    }
    100% {
      transform: scale(2);
      opacity: 0;
      border-width: 2px;
    }
  }

  .animate-explosion-burst {
    animation: explosion-burst 500ms ease-out forwards;
  }

  .animate-explosion-ring {
    animation: explosion-ring 400ms ease-out forwards;
  }

  /* BLOOD - Blood splatter for damage */
  @keyframes blood-splatter {
    0% {
      transform: translate(0, 0) scale(0.5);
      opacity: 0;
    }
    20% {
      opacity: 1;
    }
    100% {
      transform: translate(var(--tx), var(--ty)) scale(0.3);
      opacity: 0;
    }
  }

  .animate-blood-splatter {
    animation: blood-splatter 600ms ease-out forwards;
  }

  /* SMOKE - Dissipation/death effect */
  @keyframes smoke-rise {
    0% {
      transform: translate(0, 0) scale(0.5);
      opacity: 0;
    }
    30% {
      opacity: 0.6;
    }
    100% {
      transform: translate(var(--tx), calc(var(--ty) - 60px)) scale(1.5);
      opacity: 0;
    }
  }

  .animate-smoke-rise {
    animation: smoke-rise 1200ms ease-out forwards;
  }

  /* SPARKLE - Generic magical sparkle */
  @keyframes sparkle-twinkle {
    0%, 100% {
      transform: scale(0) rotate(0deg);
      opacity: 0;
    }
    50% {
      transform: scale(1) rotate(180deg);
      opacity: 1;
    }
  }

  .animate-sparkle-twinkle {
    animation: sparkle-twinkle 800ms ease-in-out forwards;
  }

  /* Particle container with glow effect */
  .spell-particle {
    position: absolute;
    border-radius: 50%;
    pointer-events: none;
    will-change: transform, opacity;
  }

  .spell-particle-wither {
    background: radial-gradient(circle, rgba(138, 43, 226, 0.9) 0%, rgba(75, 0, 130, 0.6) 50%, transparent 100%);
    box-shadow: 0 0 15px rgba(138, 43, 226, 0.8), 0 0 30px rgba(75, 0, 130, 0.5);
  }

  .spell-particle-eldritch {
    background: radial-gradient(circle, rgba(100, 255, 150, 0.9) 0%, rgba(150, 100, 255, 0.6) 50%, transparent 100%);
    box-shadow: 0 0 20px rgba(100, 255, 150, 0.8), 0 0 40px rgba(150, 100, 255, 0.5);
  }

  .spell-particle-mend {
    background: radial-gradient(circle, rgba(255, 215, 0, 0.9) 0%, rgba(255, 180, 50, 0.6) 50%, transparent 100%);
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.8);
  }

  .spell-particle-sight {
    background: radial-gradient(circle, rgba(100, 180, 255, 0.9) 0%, rgba(50, 100, 200, 0.6) 50%, transparent 100%);
    box-shadow: 0 0 15px rgba(100, 180, 255, 0.8), 0 0 25px rgba(50, 100, 200, 0.5);
  }

  .spell-particle-banish {
    background: radial-gradient(circle, rgba(255, 50, 50, 0.9) 0%, rgba(150, 0, 50, 0.6) 50%, transparent 100%);
    box-shadow: 0 0 20px rgba(255, 50, 50, 0.9), 0 0 40px rgba(150, 0, 50, 0.6);
  }

  .spell-particle-mind {
    background: radial-gradient(circle, rgba(255, 100, 200, 0.9) 0%, rgba(200, 50, 150, 0.6) 50%, transparent 100%);
    box-shadow: 0 0 20px rgba(255, 100, 200, 0.8);
  }

  .spell-particle-shield {
    background: radial-gradient(circle, rgba(100, 0, 150, 0.8) 0%, rgba(50, 0, 100, 0.5) 50%, transparent 100%);
    box-shadow: 0 0 15px rgba(100, 0, 150, 0.7);
  }

  .spell-particle-blood {
    background: radial-gradient(circle, rgba(180, 0, 0, 0.9) 0%, rgba(100, 0, 0, 0.6) 50%, transparent 100%);
    box-shadow: 0 0 10px rgba(180, 0, 0, 0.6);
  }

  .spell-particle-smoke {
    background: radial-gradient(circle, rgba(80, 80, 80, 0.7) 0%, rgba(40, 40, 40, 0.4) 50%, transparent 100%);
  }

  .spell-particle-sparkle {
    background: radial-gradient(circle, rgba(255, 255, 255, 0.9) 0%, rgba(200, 200, 255, 0.5) 50%, transparent 100%);
    box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
  }

  .spell-particle-item-collect {
    background: radial-gradient(circle, rgba(255, 200, 50, 0.95) 0%, rgba(255, 150, 0, 0.7) 40%, rgba(200, 100, 0, 0.4) 70%, transparent 100%);
    box-shadow: 0 0 15px rgba(255, 200, 50, 0.9), 0 0 30px rgba(255, 150, 0, 0.5), 0 0 45px rgba(200, 100, 0, 0.3);
  }

  /* Item collect animation - rising sparkles with slight float */
  @keyframes item-collect-rise {
    0% {
      opacity: 0;
      transform: translateY(0) translateX(var(--offset-x, 0px)) scale(0.5);
    }
    20% {
      opacity: 1;
      transform: translateY(-10px) translateX(var(--offset-x, 0px)) scale(1);
    }
    100% {
      opacity: 0;
      transform: translateY(-60px) translateX(calc(var(--offset-x, 0px) + var(--drift, 10px))) scale(0.3);
    }
  }

  .animate-item-collect-rise {
    animation: item-collect-rise var(--duration, 800ms) ease-out forwards;
    --offset-x: calc((var(--index, 0) - 3) * 12px);
    --drift: calc((var(--index, 0) - 3) * 5px);
  }

  /* Particle sizes */
  .spell-particle-sm {
    width: 8px;
    height: 8px;
  }

  .spell-particle-md {
    width: 16px;
    height: 16px;
  }

  .spell-particle-lg {
    width: 24px;
    height: 24px;
  }

  /* ==========================================================================
     FOG OF WAR SYSTEM - "The Veil Between Worlds"
     Animated shadow mist for unexplored areas
     ========================================================================== */

  /* Animated shadow mist - swirling fog in unexplored areas */
  @keyframes fog-mist-swirl {
    0% {
      transform: translate(0, 0) scale(1);
      opacity: 0.7;
    }
    25% {
      transform: translate(10px, -5px) scale(1.05);
      opacity: 0.8;
    }
    50% {
      transform: translate(-5px, -10px) scale(0.98);
      opacity: 0.75;
    }
    75% {
      transform: translate(5px, 5px) scale(1.02);
      opacity: 0.85;
    }
    100% {
      transform: translate(0, 0) scale(1);
      opacity: 0.7;
    }
  }

  @keyframes fog-mist-drift {
    0%, 100% {
      transform: translateX(-20%) translateY(0);
      opacity: 0.6;
    }
    50% {
      transform: translateX(20%) translateY(-10%);
      opacity: 0.8;
    }
  }

  @keyframes fog-tendril-wave {
    0% {
      transform: scaleY(0.8) scaleX(1);
      opacity: 0.4;
    }
    50% {
      transform: scaleY(1.2) scaleX(0.9);
      opacity: 0.6;
    }
    100% {
      transform: scaleY(0.8) scaleX(1);
      opacity: 0.4;
    }
  }

  .animate-fog-mist-swirl {
    animation: fog-mist-swirl 8s ease-in-out infinite;
  }

  .animate-fog-mist-drift {
    animation: fog-mist-drift 12s ease-in-out infinite;
  }

  .animate-fog-tendril {
    animation: fog-tendril-wave 4s ease-in-out infinite;
  }

  /* Fog of War animated overlay */
  .fog-of-war-unexplored {
    background:
      radial-gradient(ellipse at 30% 40%, rgba(20, 15, 30, 0.9) 0%, transparent 50%),
      radial-gradient(ellipse at 70% 60%, rgba(30, 20, 40, 0.85) 0%, transparent 50%),
      linear-gradient(180deg, rgba(10, 10, 20, 0.95) 0%, rgba(20, 15, 30, 0.9) 100%);
  }

  /* ==========================================================================
     FOG REVEAL FLICKER - "The Veil Tears"
     Flicker effect when fog clears upon door opening
     ========================================================================== */

  @keyframes fog-reveal-flicker {
    0% {
      opacity: 1;
      filter: brightness(0.8);
    }
    10% {
      opacity: 0.7;
      filter: brightness(1.2);
    }
    20% {
      opacity: 0.9;
      filter: brightness(0.9);
    }
    30% {
      opacity: 0.4;
      filter: brightness(1.4);
    }
    40% {
      opacity: 0.8;
      filter: brightness(1);
    }
    50% {
      opacity: 0.3;
      filter: brightness(1.5);
    }
    60% {
      opacity: 0.6;
      filter: brightness(1.1);
    }
    70% {
      opacity: 0.2;
      filter: brightness(1.3);
    }
    80% {
      opacity: 0.4;
      filter: brightness(1.2);
    }
    90% {
      opacity: 0.1;
      filter: brightness(1.1);
    }
    100% {
      opacity: 0;
      filter: brightness(1);
    }
  }

  @keyframes fog-reveal-shimmer {
    0% {
      background-position: -200% 0;
      opacity: 0.8;
    }
    50% {
      background-position: 0% 0;
      opacity: 0.4;
    }
    100% {
      background-position: 200% 0;
      opacity: 0;
    }
  }

  .animate-fog-reveal-flicker {
    animation: fog-reveal-flicker 1.2s ease-out forwards;
  }

  .fog-reveal-shimmer {
    background: linear-gradient(
      90deg,
      transparent 0%,
      rgba(200, 180, 255, 0.3) 25%,
      rgba(255, 255, 255, 0.4) 50%,
      rgba(200, 180, 255, 0.3) 75%,
      transparent 100%
    );
    background-size: 200% 100%;
    animation: fog-reveal-shimmer 1.5s ease-out forwards;
  }

  /* ==========================================================================
     3D HEX DEPTH - "The Weight of Dread"
     Board game tile thickness effect using CSS shadows and transforms
     ========================================================================== */

  .hex-3d-base {
    transform-style: preserve-3d;
    transform: perspective(800px) rotateX(2deg);
  }

  .hex-3d-depth {
    /* Note: position is handled by parent's absolute positioning */
    box-shadow:
      /* Main tile shadow - creates depth illusion */
      0 4px 0 0 hsl(25, 30%, 8%),
      0 5px 0 0 hsl(25, 25%, 6%),
      0 6px 0 0 hsl(25, 20%, 4%),
      /* Soft ambient shadow */
      0 8px 16px -4px rgba(0, 0, 0, 0.6),
      /* Inner edge highlight */
      inset 0 1px 0 0 rgba(255, 255, 255, 0.05);
  }

  .hex-3d-depth-elevated {
    box-shadow:
      /* Elevated tile - more depth */
      0 6px 0 0 hsl(25, 30%, 10%),
      0 7px 0 0 hsl(25, 25%, 8%),
      0 8px 0 0 hsl(25, 20%, 6%),
      0 9px 0 0 hsl(25, 15%, 4%),
      /* Larger ambient shadow */
      0 12px 24px -4px rgba(0, 0, 0, 0.7),
      /* Rim light */
      inset 0 2px 0 0 rgba(255, 255, 255, 0.08);
  }

  .hex-3d-depth-sunken {
    box-shadow:
      /* Sunken tile - inset shadows */
      inset 0 2px 4px 0 rgba(0, 0, 0, 0.4),
      inset 0 4px 8px 0 rgba(0, 0, 0, 0.3),
      /* Minimal external shadow */
      0 2px 0 0 hsl(25, 20%, 5%),
      0 4px 8px -2px rgba(0, 0, 0, 0.4);
  }

  /* Edge lighting for 3D effect */
  .hex-3d-edge-light {
    background: linear-gradient(
      135deg,
      rgba(255, 255, 255, 0.1) 0%,
      transparent 40%,
      transparent 60%,
      rgba(0, 0, 0, 0.2) 100%
    );
  }

  /* ==========================================================================
     ELDRITCH PORTAL - "The Gateway to Madness"
     Glowing purple portal that spawns enemies
     ========================================================================== */

  @keyframes portal-pulse {
    0%, 100% {
      box-shadow:
        0 0 20px rgba(128, 0, 255, 0.6),
        0 0 40px rgba(128, 0, 255, 0.4),
        0 0 60px rgba(128, 0, 255, 0.2),
        inset 0 0 30px rgba(128, 0, 255, 0.3);
      transform: scale(1);
    }
    50% {
      box-shadow:
        0 0 30px rgba(150, 50, 255, 0.8),
        0 0 60px rgba(150, 50, 255, 0.5),
        0 0 90px rgba(150, 50, 255, 0.3),
        inset 0 0 50px rgba(150, 50, 255, 0.4);
      transform: scale(1.05);
    }
  }

  @keyframes portal-swirl {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  @keyframes portal-energy {
    0%, 100% {
      opacity: 0.6;
      filter: hue-rotate(0deg);
    }
    25% {
      opacity: 0.8;
      filter: hue-rotate(-20deg);
    }
    50% {
      opacity: 0.7;
      filter: hue-rotate(20deg);
    }
    75% {
      opacity: 0.9;
      filter: hue-rotate(-10deg);
    }
  }

  @keyframes portal-flare {
    0%, 90%, 100% {
      opacity: 0;
      transform: scale(0.5);
    }
    95% {
      opacity: 1;
      transform: scale(1.5);
    }
  }

  .animate-portal-pulse {
    animation: portal-pulse 3s ease-in-out infinite;
  }

  .animate-portal-swirl {
    animation: portal-swirl 20s linear infinite;
  }

  .animate-portal-energy {
    animation: portal-energy 4s ease-in-out infinite;
  }

  .animate-portal-flare {
    animation: portal-flare 8s ease-in-out infinite;
  }

  .eldritch-portal-glow {
    background: radial-gradient(
      ellipse at center,
      rgba(150, 50, 255, 0.4) 0%,
      rgba(128, 0, 255, 0.3) 30%,
      rgba(80, 0, 150, 0.2) 60%,
      transparent 100%
    );
  }

  /* ==========================================================================
     BLOOD TRAILS - "The Mark of Violence"
     Visual indicator of combat damage on tiles
     ========================================================================== */

  @keyframes blood-drip {
    0% {
      transform: scaleY(0);
      opacity: 0;
    }
    20% {
      transform: scaleY(0.3);
      opacity: 0.9;
    }
    100% {
      transform: scaleY(1);
      opacity: 0.7;
    }
  }

  @keyframes blood-pool-spread {
    0% {
      transform: scale(0);
      opacity: 0;
    }
    30% {
      transform: scale(0.7);
      opacity: 0.9;
    }
    100% {
      transform: scale(1);
      opacity: 0.8;
    }
  }

  @keyframes blood-splatter {
    0% {
      transform: scale(0) rotate(0deg);
      opacity: 0;
    }
    50% {
      transform: scale(1.2) rotate(var(--rotation, 0deg));
      opacity: 1;
    }
    100% {
      transform: scale(1) rotate(var(--rotation, 0deg));
      opacity: 0.85;
    }
  }

  .animate-blood-drip {
    animation: blood-drip 0.8s ease-out forwards;
  }

  .animate-blood-pool {
    animation: blood-pool-spread 1s ease-out forwards;
  }

  .animate-blood-splatter {
    animation: blood-splatter 0.5s ease-out forwards;
  }

  .blood-stain {
    background: radial-gradient(
      ellipse at center,
      rgba(120, 10, 20, 0.9) 0%,
      rgba(80, 5, 10, 0.7) 40%,
      rgba(60, 0, 5, 0.4) 70%,
      transparent 100%
    );
  }

  .blood-splatter {
    background: radial-gradient(
      ellipse at 30% 40%,
      rgba(140, 15, 25, 0.85) 0%,
      transparent 50%
    ),
    radial-gradient(
      ellipse at 70% 60%,
      rgba(100, 10, 15, 0.75) 0%,
      transparent 40%
    ),
    radial-gradient(
      ellipse at 50% 30%,
      rgba(120, 10, 20, 0.65) 0%,
      transparent 35%
    );
  }

  /* ==========================================================================
     RAIN & LOCAL FOG PARTICLES - "Nature's Tears"
     Environmental particle effects for specific tiles
     ========================================================================== */

  @keyframes rain-drop-fall {
    0% {
      transform: translateY(-20px) rotate(15deg);
      opacity: 0;
    }
    10% {
      opacity: 0.7;
    }
    90% {
      opacity: 0.7;
    }
    100% {
      transform: translateY(200px) rotate(15deg);
      opacity: 0;
    }
  }

  @keyframes local-fog-drift {
    0%, 100% {
      transform: translateX(-30%) translateY(0) scale(1);
      opacity: 0.3;
    }
    50% {
      transform: translateX(30%) translateY(-10%) scale(1.1);
      opacity: 0.5;
    }
  }

  @keyframes local-fog-pulse {
    0%, 100% {
      opacity: 0.2;
      transform: scale(1);
    }
    50% {
      opacity: 0.4;
      transform: scale(1.05);
    }
  }

  .animate-rain-drop {
    animation: rain-drop-fall var(--duration, 0.6s) linear infinite;
    animation-delay: var(--delay, 0s);
  }

  .animate-local-fog-drift {
    animation: local-fog-drift 10s ease-in-out infinite;
  }

  .animate-local-fog-pulse {
    animation: local-fog-pulse 4s ease-in-out infinite;
  }

  .local-rain-overlay {
    background: linear-gradient(
      180deg,
      rgba(100, 130, 160, 0.1) 0%,
      rgba(80, 110, 140, 0.15) 100%
    );
  }

  .local-fog-overlay {
    background: radial-gradient(
      ellipse at center,
      rgba(150, 160, 180, 0.3) 0%,
      rgba(120, 130, 150, 0.2) 50%,
      transparent 100%
    );
  }

  /* ==========================================================================
     BOOKSHELF SEARCH - "Ancient Knowledge"
     Visual feedback for searching bookshelves
     ========================================================================== */

  @keyframes bookshelf-search {
    0% {
      filter: brightness(1);
    }
    25% {
      filter: brightness(1.3);
      transform: translateX(-2px);
    }
    50% {
      filter: brightness(1);
      transform: translateX(2px);
    }
    75% {
      filter: brightness(1.2);
      transform: translateX(-1px);
    }
    100% {
      filter: brightness(1);
      transform: translateX(0);
    }
  }

  @keyframes bookshelf-glow {
    0%, 100% {
      box-shadow: 0 0 5px rgba(139, 90, 43, 0.3);
    }
    50% {
      box-shadow: 0 0 20px rgba(200, 160, 80, 0.6);
    }
  }

  .animate-bookshelf-search {
    animation: bookshelf-search 0.8s ease-in-out;
  }

  .animate-bookshelf-glow {
    animation: bookshelf-glow 2s ease-in-out infinite;
  }

  .bookshelf-unsearched {
    filter: brightness(1.05);
    box-shadow: 0 0 10px rgba(200, 160, 80, 0.3);
  }

  .bookshelf-searched {
    filter: brightness(0.85) grayscale(0.2);
    opacity: 0.7;
  }

  /* ==========================================================================
     QUEST ITEM SYSTEM - "Artifacts of Fate"
     Visual indicators for quest-critical items and tiles
     ========================================================================== */

  /* Quest item glow animation - pulsing aura around quest items on tiles */
  @keyframes quest-item-glow {
    0%, 100% {
      transform: scale(1);
      opacity: 0.6;
    }
    50% {
      transform: scale(1.3);
      opacity: 0.9;
    }
  }

  .animate-quest-item-glow {
    animation: quest-item-glow 2s ease-in-out infinite;
  }

  /* Quest tile pulse - border glow for tiles containing quest items */
  @keyframes quest-tile-pulse {
    0%, 100% {
      opacity: 0.6;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(1.02);
    }
  }

  .animate-quest-tile-pulse {
    animation: quest-tile-pulse 2.5s ease-in-out infinite;
  }

  /* Exit tile beacon - strong pulsing glow when exit is available */
  @keyframes exit-beacon {
    0%, 100% {
      box-shadow: 0 0 20px rgba(52, 211, 153, 0.4),
                  0 0 40px rgba(52, 211, 153, 0.2),
                  inset 0 0 10px rgba(52, 211, 153, 0.1);
    }
    50% {
      box-shadow: 0 0 30px rgba(52, 211, 153, 0.6),
                  0 0 60px rgba(52, 211, 153, 0.3),
                  inset 0 0 20px rgba(52, 211, 153, 0.2);
    }
  }

  .animate-exit-beacon {
    animation: exit-beacon 2s ease-in-out infinite;
  }

  /* Key item shimmer - special golden glow for keys */
  @keyframes key-shimmer {
    0%, 100% {
      filter: drop-shadow(0 0 4px rgba(251, 191, 36, 0.5));
    }
    50% {
      filter: drop-shadow(0 0 10px rgba(251, 191, 36, 0.8));
    }
  }

  .animate-key-shimmer {
    animation: key-shimmer 1.5s ease-in-out infinite;
  }

  /* Collectible sparkle - twinkling effect for collectibles */
  @keyframes collectible-sparkle {
    0%, 100% {
      opacity: 0.7;
      transform: rotate(0deg) scale(1);
    }
    25% {
      opacity: 1;
      transform: rotate(90deg) scale(1.1);
    }
    50% {
      opacity: 0.8;
      transform: rotate(180deg) scale(1);
    }
    75% {
      opacity: 1;
      transform: rotate(270deg) scale(1.1);
    }
  }

  .animate-collectible-sparkle {
    animation: collectible-sparkle 3s linear infinite;
  }

  /* ==========================================================================
     TILE-BASED ATMOSPHERIC EFFECTS - "The Atmosphere of Dread"
     Visual effects for specific tile types
     ========================================================================== */

  /* CHURCH - Divine Light Rays with Dust Particles */
  @keyframes divine-light-ray {
    0%, 100% {
      opacity: 0.15;
      transform: translateX(0);
    }
    50% {
      opacity: 0.3;
      transform: translateX(5px);
    }
  }

  @keyframes divine-dust-float {
    0% {
      transform: translate(0, -100%) rotate(0deg);
      opacity: 0;
    }
    20% {
      opacity: 0.8;
    }
    80% {
      opacity: 0.6;
    }
    100% {
      transform: translate(20px, 100%) rotate(180deg);
      opacity: 0;
    }
  }

  .tile-church-light {
    background: linear-gradient(
      135deg,
      transparent 40%,
      rgba(255, 215, 100, 0.08) 45%,
      rgba(255, 215, 100, 0.15) 50%,
      rgba(255, 215, 100, 0.08) 55%,
      transparent 60%
    );
    animation: divine-light-ray 6s ease-in-out infinite;
  }

  .divine-dust-particle {
    width: 3px;
    height: 3px;
    background: radial-gradient(circle, rgba(255, 230, 150, 0.9), transparent);
    border-radius: 50%;
    animation: divine-dust-float 8s linear infinite;
  }

  /* RITUAL CHAMBER - Pulsating Occult Symbols */
  @keyframes occult-symbol-pulse {
    0%, 100% {
      opacity: 0.2;
      filter: blur(2px) hue-rotate(0deg);
      text-shadow: 0 0 10px rgba(128, 0, 255, 0.5);
    }
    33% {
      opacity: 0.6;
      filter: blur(1px) hue-rotate(20deg);
      text-shadow: 0 0 30px rgba(150, 50, 255, 0.8);
    }
    66% {
      opacity: 0.4;
      filter: blur(1.5px) hue-rotate(-10deg);
      text-shadow: 0 0 20px rgba(180, 0, 100, 0.7);
    }
  }

  @keyframes rune-flicker {
    0%, 90%, 100% { opacity: 0.3; }
    92%, 98% { opacity: 0.9; }
    95% { opacity: 0.1; }
  }

  .ritual-rune-glow {
    animation: occult-symbol-pulse 4s ease-in-out infinite;
  }

  .ritual-rune-flicker {
    animation: rune-flicker 5s ease-in-out infinite;
  }

  .tile-ritual-overlay {
    background: radial-gradient(
      circle at center,
      rgba(128, 0, 128, 0.15) 0%,
      rgba(80, 0, 100, 0.1) 50%,
      transparent 100%
    );
  }

  /* CRYPT/TOMB - Ghost Mist and Spirit Glimpses */
  @keyframes crypt-mist-crawl {
    0% {
      transform: translateX(-100%) scaleY(0.8);
      opacity: 0;
    }
    20% {
      opacity: 0.6;
    }
    80% {
      opacity: 0.5;
    }
    100% {
      transform: translateX(100%) scaleY(1.2);
      opacity: 0;
    }
  }

  @keyframes ghost-glimpse {
    0%, 85%, 100% {
      opacity: 0;
      transform: scale(0.8) translateY(10px);
    }
    88%, 92% {
      opacity: 0.4;
      transform: scale(1) translateY(0);
    }
    90% {
      opacity: 0.6;
      transform: scale(1.05) translateY(-5px);
    }
  }

  .crypt-floor-mist {
    background: linear-gradient(
      to top,
      rgba(150, 160, 180, 0.4) 0%,
      rgba(150, 160, 180, 0.2) 30%,
      transparent 60%
    );
    animation: crypt-mist-crawl 15s linear infinite;
  }

  .ghost-face-glimpse {
    animation: ghost-glimpse 12s ease-in-out infinite;
    filter: blur(2px);
  }

  .tile-crypt-overlay {
    background: linear-gradient(
      to top,
      rgba(100, 110, 130, 0.3) 0%,
      transparent 40%
    );
  }

  /* LABORATORY - Electric Sparks and Bubbling Liquids */
  @keyframes electric-spark {
    0% {
      opacity: 0;
      transform: scale(0) rotate(0deg);
    }
    10% {
      opacity: 1;
      transform: scale(1) rotate(45deg);
    }
    20% {
      opacity: 0.8;
      transform: scale(0.8) rotate(90deg);
    }
    30% {
      opacity: 0;
      transform: scale(0) rotate(135deg);
    }
    100% {
      opacity: 0;
    }
  }

  @keyframes bubble-rise {
    0% {
      transform: translateY(0) scale(1);
      opacity: 0.8;
    }
    50% {
      transform: translateY(-15px) scale(1.2);
      opacity: 0.6;
    }
    100% {
      transform: translateY(-30px) scale(0.5);
      opacity: 0;
    }
  }

  .lab-spark {
    width: 8px;
    height: 8px;
    background: radial-gradient(circle, #fff 20%, #88ccff 50%, transparent 70%);
    box-shadow: 0 0 10px #88ccff, 0 0 20px #4488ff;
    animation: electric-spark 0.3s ease-out;
  }

  .lab-bubble {
    width: 6px;
    height: 6px;
    background: radial-gradient(circle at 30% 30%, rgba(100, 255, 150, 0.8), rgba(50, 200, 100, 0.4));
    border-radius: 50%;
    animation: bubble-rise 2s ease-out infinite;
  }

  .tile-lab-overlay {
    background: linear-gradient(
      180deg,
      rgba(50, 100, 150, 0.05) 0%,
      rgba(50, 150, 100, 0.08) 100%
    );
  }

  /* HARBOR/WATER - Wave Reflections and Deep Shadows */
  @keyframes water-reflection {
    0%, 100% {
      background-position: 0% 50%;
      opacity: 0.3;
    }
    25% {
      background-position: 50% 25%;
      opacity: 0.5;
    }
    50% {
      background-position: 100% 50%;
      opacity: 0.4;
    }
    75% {
      background-position: 50% 75%;
      opacity: 0.5;
    }
  }

  @keyframes deep-shadow-pass {
    0%, 70%, 100% {
      opacity: 0;
      transform: translateX(-100%) scale(0.8);
    }
    75%, 85% {
      opacity: 0.3;
      transform: translateX(0%) scale(1);
    }
    80% {
      opacity: 0.5;
      transform: translateX(50%) scale(1.1);
    }
  }

  .water-light-dance {
    background: linear-gradient(
      45deg,
      transparent 30%,
      rgba(100, 150, 200, 0.2) 35%,
      rgba(150, 200, 255, 0.3) 40%,
      transparent 45%
    );
    background-size: 200% 200%;
    animation: water-reflection 4s ease-in-out infinite;
  }

  .deep-one-shadow {
    background: radial-gradient(ellipse, rgba(0, 20, 40, 0.6), transparent 70%);
    animation: deep-shadow-pass 20s ease-in-out infinite;
  }

  .tile-water-overlay {
    background: linear-gradient(
      180deg,
      rgba(50, 100, 150, 0.1) 0%,
      rgba(30, 80, 130, 0.15) 100%
    );
  }

  /* ==========================================================================
     ACTION-BASED EFFECTS - "The Weight of Choice"
     Visual feedback for player actions
     ========================================================================== */

  /* MOVEMENT - Footstep Dust */
  @keyframes footstep-dust {
    0% {
      transform: translate(0, 0) scale(0.5);
      opacity: 0.8;
    }
    100% {
      transform: translate(var(--tx, 10px), var(--ty, -5px)) scale(0);
      opacity: 0;
    }
  }

  .footstep-dust-particle {
    width: 4px;
    height: 4px;
    background: radial-gradient(circle, rgba(150, 130, 100, 0.8), transparent);
    border-radius: 50%;
    animation: footstep-dust 0.6s ease-out forwards;
  }

  .animate-footstep-dust {
    animation: footstep-dust 0.6s ease-out forwards;
  }

  /* DOOR OPENING - Dust Fall and Light Reveal */
  @keyframes door-dust-fall {
    0% {
      transform: translateY(0) rotate(0deg);
      opacity: 0.9;
    }
    100% {
      transform: translateY(40px) rotate(180deg);
      opacity: 0;
    }
  }

  @keyframes door-light-reveal {
    0% {
      clip-path: polygon(50% 0%, 50% 0%, 50% 100%, 50% 100%);
      opacity: 0;
    }
    100% {
      clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
      opacity: 0.6;
    }
  }

  .door-opening-dust {
    animation: door-dust-fall 1s ease-out forwards;
  }

  .door-light-spill {
    background: linear-gradient(
      var(--door-direction, 90deg),
      rgba(255, 230, 180, 0.4),
      transparent
    );
    animation: door-light-reveal 0.8s ease-out forwards;
  }

  .animate-door-opening {
    animation: door-dust-fall 1s ease-out forwards;
  }

  /* SKILL CHECK - Dice Anticipation and Results */
  @keyframes dice-anticipation-glow {
    0% {
      box-shadow: 0 0 10px rgba(255, 200, 50, 0.3);
    }
    50% {
      box-shadow: 0 0 30px rgba(255, 200, 50, 0.6);
    }
    100% {
      box-shadow: 0 0 10px rgba(255, 200, 50, 0.3);
    }
  }

  @keyframes dice-success-burst {
    0% {
      box-shadow: 0 0 20px rgba(50, 255, 100, 0.8);
      transform: scale(1);
    }
    50% {
      box-shadow: 0 0 50px rgba(50, 255, 100, 1);
      transform: scale(1.1);
    }
    100% {
      box-shadow: 0 0 10px rgba(50, 255, 100, 0.3);
      transform: scale(1);
    }
  }

  @keyframes dice-fail-shake {
    0%, 100% {
      transform: translateX(0);
      box-shadow: 0 0 20px rgba(255, 50, 50, 0.6);
    }
    20%, 60% {
      transform: translateX(-5px);
      box-shadow: 0 0 30px rgba(255, 50, 50, 0.8);
    }
    40%, 80% {
      transform: translateX(5px);
      box-shadow: 0 0 30px rgba(255, 50, 50, 0.8);
    }
  }

  .dice-rolling {
    animation: dice-anticipation-glow 0.5s ease-in-out infinite;
  }

  .dice-success {
    animation: dice-success-burst 0.6s ease-out;
  }

  .dice-fail {
    animation: dice-fail-shake 0.4s ease-in-out;
  }

  /* COMBAT - Melee Slash, Ranged Tracer, Impact */
  @keyframes melee-slash-trail {
    0% {
      clip-path: polygon(50% 50%, 50% 0%, 50% 0%);
      opacity: 0.9;
    }
    100% {
      clip-path: polygon(50% 50%, 0% 0%, 100% 0%);
      opacity: 0;
    }
  }

  @keyframes ranged-tracer {
    0% {
      transform: translate(0, 0) scaleX(0);
      opacity: 0;
    }
    20% {
      opacity: 1;
      transform: translate(20%, 0) scaleX(0.5);
    }
    100% {
      transform: translate(var(--tx, 100px), var(--ty, 0)) scaleX(1);
      opacity: 0;
    }
  }

  @keyframes impact-star {
    0% {
      transform: scale(0) rotate(0deg);
      opacity: 1;
    }
    50% {
      transform: scale(1.5) rotate(180deg);
      opacity: 0.8;
    }
    100% {
      transform: scale(0.5) rotate(360deg);
      opacity: 0;
    }
  }

  .melee-slash {
    background: linear-gradient(
      to right,
      transparent,
      rgba(255, 255, 255, 0.8),
      transparent
    );
    animation: melee-slash-trail 0.3s ease-out forwards;
  }

  .ranged-tracer {
    height: 2px;
    background: linear-gradient(90deg, transparent, #ffaa00, #ff6600);
    animation: ranged-tracer 0.2s ease-out forwards;
  }

  .impact-star {
    background: radial-gradient(circle, #fff, #ffcc00, transparent);
    animation: impact-star 0.4s ease-out forwards;
  }

  .animate-melee-slash {
    animation: melee-slash-trail 0.3s ease-out forwards;
  }

  .animate-ranged-tracer {
    animation: ranged-tracer 0.2s ease-out forwards;
  }

  .animate-impact-star {
    animation: impact-star 0.4s ease-out forwards;
  }

  /* ==========================================================================
     ENEMY EFFECTS - "The Things That Hunt"
     Visual effects for enemy spawning, death, and movement
     ========================================================================== */

  /* ENEMY SPAWN - Portal Manifestation */
  @keyframes enemy-spawn-rift {
    0% {
      transform: scale(0) rotate(0deg);
      opacity: 0;
      filter: hue-rotate(0deg);
    }
    30% {
      transform: scale(1.5) rotate(180deg);
      opacity: 1;
      filter: hue-rotate(60deg);
    }
    60% {
      transform: scale(1.2) rotate(360deg);
      opacity: 0.8;
      filter: hue-rotate(-30deg);
    }
    100% {
      transform: scale(0) rotate(540deg);
      opacity: 0;
      filter: hue-rotate(0deg);
    }
  }

  @keyframes enemy-materialize {
    0% {
      opacity: 0;
      transform: scale(0.5);
      filter: blur(10px) brightness(2);
    }
    50% {
      opacity: 0.7;
      transform: scale(1.1);
      filter: blur(5px) brightness(1.5);
    }
    100% {
      opacity: 1;
      transform: scale(1);
      filter: blur(0) brightness(1);
    }
  }

  .spawn-rift {
    background: radial-gradient(
      circle,
      rgba(150, 50, 255, 0.8) 0%,
      rgba(100, 0, 200, 0.5) 30%,
      transparent 70%
    );
    animation: enemy-spawn-rift 1s ease-out forwards;
  }

  .enemy-materializing {
    animation: enemy-materialize 0.8s ease-out forwards;
  }

  .animate-enemy-spawn {
    animation: enemy-spawn-rift 1s ease-out forwards;
  }

  .animate-enemy-materialize {
    animation: enemy-materialize 0.8s ease-out forwards;
  }

  /* ENEMY DEATH - Type-specific Dissolution */
  @keyframes ghoul-dissolve {
    0% {
      transform: scale(1);
      opacity: 1;
      filter: grayscale(0);
    }
    50% {
      transform: scale(0.8) translateY(10px);
      opacity: 0.6;
      filter: grayscale(0.5) sepia(0.3);
    }
    100% {
      transform: scale(0) translateY(30px);
      opacity: 0;
      filter: grayscale(1) sepia(0.6);
    }
  }

  @keyframes deep-one-dissolve {
    0% {
      transform: scale(1);
      opacity: 1;
      filter: hue-rotate(0deg);
    }
    50% {
      transform: scale(1.1) translateY(-5px);
      opacity: 0.5;
      filter: hue-rotate(30deg) blur(3px);
    }
    100% {
      transform: scale(1.5) translateY(-20px);
      opacity: 0;
      filter: hue-rotate(60deg) blur(10px);
    }
  }

  @keyframes cultist-death {
    0% {
      transform: scale(1) rotate(0deg);
      opacity: 1;
    }
    30% {
      transform: scale(0.9) rotate(-5deg);
      opacity: 0.8;
    }
    100% {
      transform: scale(0.7) rotate(-15deg) translateY(20px);
      opacity: 0;
    }
  }

  @keyframes shoggoth-dissolve {
    0% {
      transform: scale(1);
      opacity: 1;
      filter: hue-rotate(0deg) saturate(1);
    }
    30% {
      transform: scale(1.3) skew(5deg, 5deg);
      opacity: 0.8;
      filter: hue-rotate(30deg) saturate(1.5);
    }
    60% {
      transform: scale(0.8) skew(-10deg, -10deg);
      opacity: 0.5;
      filter: hue-rotate(-20deg) saturate(0.5) blur(3px);
    }
    100% {
      transform: scale(0) skew(0deg, 0deg);
      opacity: 0;
      filter: hue-rotate(0deg) saturate(0) blur(10px);
    }
  }

  .ghoul-dying { animation: ghoul-dissolve 1.2s ease-out forwards; }
  .deep-one-dying { animation: deep-one-dissolve 1.5s ease-out forwards; }
  .cultist-dying { animation: cultist-death 0.8s ease-out forwards; }
  .shoggoth-dying { animation: shoggoth-dissolve 2s ease-out forwards; }

  .animate-enemy-death-ghoul { animation: ghoul-dissolve 1.2s ease-out forwards; }
  .animate-enemy-death-deep-one { animation: deep-one-dissolve 1.5s ease-out forwards; }
  .animate-enemy-death-cultist { animation: cultist-death 0.8s ease-out forwards; }
  .animate-enemy-death-shoggoth { animation: shoggoth-dissolve 2s ease-out forwards; }

  /* ENEMY MOVEMENT - Creepy Movement Trail */
  @keyframes creepy-movement-trail {
    0% {
      opacity: 0.6;
      transform: scale(1);
      filter: blur(0);
    }
    100% {
      opacity: 0;
      transform: scale(0.8);
      filter: blur(4px);
    }
  }

  .enemy-movement-ghost {
    animation: creepy-movement-trail 0.5s ease-out forwards;
  }

  .animate-enemy-move {
    animation: creepy-movement-trail 0.5s ease-out forwards;
  }

  /* ==========================================================================
     DOOM & SANITY EFFECTS - "The Mind Unravels"
     Visual feedback for the doom timer and sanity system
     ========================================================================== */

  /* DOOM TICK - Clock Pulse */
  @keyframes doom-tick-pulse {
    0% {
      box-shadow: 0 0 0 0 rgba(200, 0, 50, 0.8);
    }
    50% {
      box-shadow: 0 0 30px 15px rgba(200, 0, 50, 0.4);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(200, 0, 50, 0);
    }
  }

  @keyframes doom-screen-pulse {
    0% {
      box-shadow: inset 0 0 50px rgba(100, 0, 0, 0);
    }
    50% {
      box-shadow: inset 0 0 100px rgba(100, 0, 0, 0.3);
    }
    100% {
      box-shadow: inset 0 0 50px rgba(100, 0, 0, 0);
    }
  }

  .doom-ticking {
    animation: doom-tick-pulse 1s ease-out;
  }

  .doom-screen-effect {
    animation: doom-screen-pulse 1s ease-out;
  }

  .animate-doom-tick {
    animation: doom-tick-pulse 1s ease-out;
  }

  /* DOOM CRITICAL - Constant Threat Vignette */
  @keyframes doom-critical-vignette {
    0%, 100% {
      box-shadow: inset 0 0 80px 30px rgba(0, 0, 0, 0.7);
    }
    50% {
      box-shadow: inset 0 0 100px 40px rgba(50, 0, 0, 0.8);
    }
  }

  @keyframes doom-critical-flicker {
    0%, 95%, 100% {
      filter: brightness(1);
    }
    96% {
      filter: brightness(0.6);
    }
    97% {
      filter: brightness(1.2);
    }
    98% {
      filter: brightness(0.8);
    }
  }

  .doom-critical-overlay {
    animation:
      doom-critical-vignette 4s ease-in-out infinite,
      doom-critical-flicker 8s ease-in-out infinite;
  }

  .animate-doom-critical {
    animation: doom-critical-vignette 4s ease-in-out infinite;
  }

  /* SANITY LOSS - Distortion Effect */
  @keyframes sanity-loss-distort {
    0% {
      transform: scale(1);
      filter: hue-rotate(0deg) saturate(1);
    }
    25% {
      transform: scale(1.02) skewX(2deg);
      filter: hue-rotate(30deg) saturate(1.3);
    }
    50% {
      transform: scale(0.98) skewX(-2deg);
      filter: hue-rotate(-20deg) saturate(0.8);
    }
    75% {
      transform: scale(1.01) skewY(1deg);
      filter: hue-rotate(15deg) saturate(1.1);
    }
    100% {
      transform: scale(1);
      filter: hue-rotate(0deg) saturate(1);
    }
  }

  @keyframes sanity-loss-flash {
    0%, 100% {
      background: transparent;
    }
    10%, 30% {
      background: rgba(128, 0, 255, 0.2);
    }
    20% {
      background: rgba(128, 0, 255, 0.4);
    }
  }

  .sanity-losing {
    animation: sanity-loss-distort 0.6s ease-out;
  }

  .sanity-loss-overlay {
    animation: sanity-loss-flash 0.6s ease-out;
  }

  .animate-sanity-loss {
    animation: sanity-loss-distort 0.6s ease-out;
  }

  /* SANITY RESTORE - Clarity Wave */
  @keyframes sanity-restore-wave {
    0% {
      box-shadow: 0 0 0 0 rgba(200, 180, 100, 0.6);
      filter: brightness(1);
    }
    50% {
      box-shadow: 0 0 40px 20px rgba(200, 180, 100, 0.3);
      filter: brightness(1.1);
    }
    100% {
      box-shadow: 0 0 0 0 rgba(200, 180, 100, 0);
      filter: brightness(1);
    }
  }

  .sanity-restoring {
    animation: sanity-restore-wave 1s ease-out;
  }

  .animate-sanity-restore {
    animation: sanity-restore-wave 1s ease-out;
  }

  /* ==========================================================================
     ITEM INTERACTION EFFECTS - "Tools of Survival"
     Visual effects for item pickup and usage
     ========================================================================== */

  /* ITEM PICKUP - Golden Ring and Sparkles */
  @keyframes item-pickup-ring {
    0% {
      transform: scale(0.5);
      opacity: 1;
      border-width: 3px;
    }
    100% {
      transform: scale(2);
      opacity: 0;
      border-width: 1px;
    }
  }

  @keyframes item-pickup-sparkle {
    0% {
      transform: translate(0, 0) scale(0);
      opacity: 0;
    }
    30% {
      opacity: 1;
      transform: translate(var(--tx, 10px), var(--ty, -10px)) scale(1);
    }
    100% {
      transform: translate(calc(var(--tx, 10px) * 2), calc(var(--ty, -10px) * 2)) scale(0);
      opacity: 0;
    }
  }

  .item-pickup-ring {
    border: 3px solid rgba(255, 215, 0, 0.8);
    border-radius: 50%;
    animation: item-pickup-ring 0.6s ease-out forwards;
  }

  .item-sparkle {
    width: 6px;
    height: 6px;
    background: radial-gradient(circle, #fff, #ffd700);
    border-radius: 50%;
    animation: item-pickup-sparkle 0.8s ease-out forwards;
  }

  .animate-item-pickup {
    animation: item-pickup-ring 0.6s ease-out forwards;
  }

  /* FLASHLIGHT USE - Light Cone Sweep */
  @keyframes flashlight-sweep {
    0% {
      clip-path: polygon(50% 50%, 40% 0%, 60% 0%);
      opacity: 0;
    }
    30% {
      opacity: 0.8;
    }
    100% {
      clip-path: polygon(50% 50%, 0% 0%, 100% 0%);
      opacity: 0.6;
    }
  }

  @keyframes flashlight-beam-pulse {
    0%, 100% {
      opacity: 0.6;
      transform: scaleY(1);
    }
    50% {
      opacity: 0.8;
      transform: scaleY(1.05);
    }
  }

  .flashlight-cone {
    background: linear-gradient(
      180deg,
      rgba(255, 250, 200, 0.5) 0%,
      rgba(255, 250, 200, 0.2) 60%,
      transparent 100%
    );
    animation: flashlight-sweep 0.8s ease-out forwards;
  }

  .flashlight-active {
    animation: flashlight-beam-pulse 2s ease-in-out infinite;
  }

  .animate-flashlight-reveal {
    animation: flashlight-sweep 0.8s ease-out forwards;
  }

  /* OCCULT ITEM USE - Eldritch Energy */
  @keyframes occult-item-activate {
    0% {
      transform: scale(0);
      opacity: 0;
      filter: hue-rotate(0deg);
    }
    50% {
      transform: scale(1.5);
      opacity: 1;
      filter: hue-rotate(30deg);
    }
    100% {
      transform: scale(2);
      opacity: 0;
      filter: hue-rotate(-30deg);
    }
  }

  @keyframes elder-sign-glow {
    0%, 100% {
      filter: drop-shadow(0 0 5px rgba(255, 215, 0, 0.5));
    }
    50% {
      filter: drop-shadow(0 0 20px rgba(255, 215, 0, 1));
    }
  }

  .occult-activate-wave {
    background: radial-gradient(
      circle,
      rgba(150, 50, 255, 0.6) 0%,
      rgba(100, 0, 200, 0.3) 50%,
      transparent 100%
    );
    animation: occult-item-activate 1s ease-out forwards;
  }

  .elder-sign-active {
    animation: elder-sign-glow 1s ease-in-out infinite;
  }

  .animate-occult-activate {
    animation: occult-item-activate 1s ease-out forwards;
  }

  /* ==========================================================================
     AMBIENT LIGHTING EFFECTS - "The Dance of Shadows"
     Atmospheric lighting for different tile environments
     ========================================================================== */

  /* GASLIGHT FLICKER - 1920s Street Ambience */
  @keyframes gaslight-flicker {
    0%, 100% {
      box-shadow: inset 0 0 30px hsla(35, 80%, 50%, 0.15);
      filter: brightness(1);
    }
    10% {
      box-shadow: inset 0 0 25px hsla(35, 80%, 45%, 0.12);
      filter: brightness(0.98);
    }
    20% {
      box-shadow: inset 0 0 35px hsla(35, 80%, 55%, 0.18);
      filter: brightness(1.02);
    }
    30% {
      box-shadow: inset 0 0 28px hsla(35, 80%, 48%, 0.14);
      filter: brightness(0.99);
    }
    50% {
      box-shadow: inset 0 0 40px hsla(35, 80%, 50%, 0.2);
      filter: brightness(1.03);
    }
    70% {
      box-shadow: inset 0 0 32px hsla(35, 80%, 52%, 0.16);
      filter: brightness(1.01);
    }
    85% {
      box-shadow: inset 0 0 22px hsla(35, 80%, 42%, 0.1);
      filter: brightness(0.97);
    }
  }

  .gaslight-ambience {
    animation: gaslight-flicker 4s ease-in-out infinite;
  }

  .animate-gaslight {
    animation: gaslight-flicker 4s ease-in-out infinite;
  }

  /* MOONLIGHT - Cold Exterior Light */
  @keyframes moonlight-shimmer {
    0%, 100% {
      opacity: 0.3;
      filter: hue-rotate(0deg);
    }
    50% {
      opacity: 0.5;
      filter: hue-rotate(10deg);
    }
  }

  .moonlight-overlay {
    background: linear-gradient(
      135deg,
      rgba(180, 200, 255, 0.15) 0%,
      transparent 50%,
      rgba(150, 180, 230, 0.1) 100%
    );
    animation: moonlight-shimmer 8s ease-in-out infinite;
  }

  .animate-moonlight {
    animation: moonlight-shimmer 8s ease-in-out infinite;
  }

  /* CANDLE FLICKER - Warm Intimate Light */
  @keyframes candle-flame {
    0%, 100% {
      transform: scaleY(1) scaleX(1);
      filter: brightness(1);
    }
    25% {
      transform: scaleY(1.1) scaleX(0.95);
      filter: brightness(1.1);
    }
    50% {
      transform: scaleY(0.95) scaleX(1.05);
      filter: brightness(0.95);
    }
    75% {
      transform: scaleY(1.05) scaleX(0.98);
      filter: brightness(1.05);
    }
  }

  @keyframes candle-shadow-dance {
    0%, 100% {
      transform: rotate(0deg) scale(1);
    }
    25% {
      transform: rotate(2deg) scale(1.02);
    }
    50% {
      transform: rotate(-1deg) scale(0.98);
    }
    75% {
      transform: rotate(1deg) scale(1.01);
    }
  }

  .candle-glow {
    background: radial-gradient(
      ellipse at 50% 70%,
      rgba(255, 200, 100, 0.3) 0%,
      rgba(255, 150, 50, 0.15) 30%,
      transparent 60%
    );
    animation: candle-flame 2s ease-in-out infinite;
  }

  .candle-shadow {
    animation: candle-shadow-dance 3s ease-in-out infinite;
  }

  .animate-candle {
    animation: candle-flame 2s ease-in-out infinite;
  }

  /* TORCH LIGHT - Flickering Fire */
  @keyframes torch-flicker {
    0%, 100% {
      box-shadow:
        inset 0 0 40px rgba(255, 150, 50, 0.2),
        0 0 30px rgba(255, 100, 30, 0.3);
      filter: brightness(1);
    }
    15% {
      box-shadow:
        inset 0 0 35px rgba(255, 130, 40, 0.15),
        0 0 25px rgba(255, 80, 20, 0.25);
      filter: brightness(0.95);
    }
    30% {
      box-shadow:
        inset 0 0 50px rgba(255, 160, 60, 0.25),
        0 0 40px rgba(255, 120, 40, 0.35);
      filter: brightness(1.05);
    }
    50% {
      box-shadow:
        inset 0 0 45px rgba(255, 140, 50, 0.22),
        0 0 35px rgba(255, 110, 35, 0.32);
      filter: brightness(1.02);
    }
    70% {
      box-shadow:
        inset 0 0 30px rgba(255, 120, 40, 0.18),
        0 0 20px rgba(255, 90, 25, 0.28);
      filter: brightness(0.97);
    }
  }

  .torch-ambience {
    animation: torch-flicker 3s ease-in-out infinite;
  }

  .animate-torch {
    animation: torch-flicker 3s ease-in-out infinite;
  }

  /* ==========================================================================
     UI AND SPECIAL SITUATION EFFECTS - "Moments of Truth"
     Visual effects for notifications, transitions, and dramatic moments
     ========================================================================== */

  /* NOTIFICATION POP */
  @keyframes notification-appear {
    0% {
      transform: translateX(100%) scale(0.8);
      opacity: 0;
    }
    70% {
      transform: translateX(-5%) scale(1.02);
      opacity: 1;
    }
    100% {
      transform: translateX(0) scale(1);
      opacity: 1;
    }
  }

  @keyframes notification-glow {
    0%, 100% {
      box-shadow: 0 0 10px rgba(255, 200, 50, 0.3);
    }
    50% {
      box-shadow: 0 0 20px rgba(255, 200, 50, 0.6);
    }
  }

  .notification-enter {
    animation:
      notification-appear 0.5s ease-out forwards,
      notification-glow 2s ease-in-out infinite;
  }

  .animate-notification {
    animation: notification-appear 0.5s ease-out forwards;
  }

  /* TURN TRANSITION SWEEP */
  @keyframes turn-transition-sweep {
    0% {
      transform: translateX(-100%);
      opacity: 0;
    }
    50% {
      opacity: 0.6;
    }
    100% {
      transform: translateX(100%);
      opacity: 0;
    }
  }

  .turn-sweep {
    background: linear-gradient(
      90deg,
      transparent,
      rgba(255, 255, 255, 0.1),
      rgba(255, 200, 100, 0.2),
      rgba(255, 255, 255, 0.1),
      transparent
    );
    animation: turn-transition-sweep 0.8s ease-in-out;
  }

  .animate-turn-transition {
    animation: turn-transition-sweep 0.8s ease-in-out;
  }

  /* HORROR CHECK - Face Flash */
  @keyframes horror-face-flash {
    0%, 90%, 100% {
      opacity: 0;
      transform: scale(0.8);
      filter: blur(5px);
    }
    92%, 98% {
      opacity: 0.7;
      transform: scale(1);
      filter: blur(0);
    }
    95% {
      opacity: 0.9;
      transform: scale(1.1);
      filter: blur(0);
    }
  }

  @keyframes horror-screen-flash {
    0%, 100% {
      background: transparent;
    }
    5%, 15% {
      background: rgba(0, 0, 0, 0.8);
    }
    10% {
      background: rgba(50, 0, 0, 0.9);
    }
  }

  .horror-face-glimpse {
    animation: horror-face-flash 0.5s ease-out;
  }

  .horror-screen-effect {
    animation: horror-screen-flash 0.5s ease-out;
  }

  .animate-horror-check {
    animation: horror-screen-flash 0.5s ease-out;
  }

  /* MADNESS ONSET - Reality Crack */
  @keyframes reality-crack {
    0% {
      clip-path: polygon(50% 50%, 50% 50%, 50% 50%, 50% 50%);
    }
    50% {
      clip-path: polygon(30% 0%, 70% 0%, 100% 50%, 70% 100%, 30% 100%, 0% 50%);
    }
    100% {
      clip-path: polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%);
    }
  }

  @keyframes reality-invert {
    0%, 100% {
      filter: invert(0) hue-rotate(0deg);
    }
    25% {
      filter: invert(0.3) hue-rotate(180deg);
    }
    50% {
      filter: invert(0.5) hue-rotate(90deg);
    }
    75% {
      filter: invert(0.2) hue-rotate(-90deg);
    }
  }

  .reality-cracking {
    background: linear-gradient(
      var(--crack-angle, 45deg),
      transparent 48%,
      rgba(128, 0, 255, 0.8) 49%,
      rgba(255, 0, 128, 0.8) 51%,
      transparent 52%
    );
    animation: reality-crack 1s ease-out forwards;
  }

  .madness-onset {
    animation: reality-invert 1.5s ease-in-out;
  }

  .animate-madness-onset {
    animation: reality-invert 1.5s ease-in-out;
  }

  /* VICTORY BURST - Light Explosion */
  @keyframes victory-light-burst {
    0% {
      transform: scale(0);
      opacity: 0;
    }
    30% {
      transform: scale(1);
      opacity: 1;
    }
    100% {
      transform: scale(3);
      opacity: 0;
    }
  }

  @keyframes victory-golden-wash {
    0% {
      background: transparent;
    }
    30% {
      background: rgba(255, 215, 0, 0.3);
    }
    100% {
      background: transparent;
    }
  }

  .victory-burst {
    background: radial-gradient(
      circle,
      rgba(255, 255, 255, 1) 0%,
      rgba(255, 215, 0, 0.8) 30%,
      rgba(255, 200, 50, 0.4) 60%,
      transparent 100%
    );
    animation: victory-light-burst 2s ease-out forwards;
  }

  .victory-screen {
    animation: victory-golden-wash 2s ease-in-out;
  }

  .animate-victory {
    animation: victory-light-burst 2s ease-out forwards;
  }

  /* GAME OVER - Darkness Consuming */
  @keyframes darkness-consume {
    0% {
      clip-path: circle(100% at 50% 50%);
      filter: brightness(1);
    }
    70% {
      clip-path: circle(30% at 50% 50%);
      filter: brightness(0.5);
    }
    100% {
      clip-path: circle(0% at 50% 50%);
      filter: brightness(0);
    }
  }

  @keyframes tentacle-creep {
    0% {
      transform: translateX(-100%) scaleY(0.3);
      opacity: 0;
    }
    50% {
      opacity: 1;
    }
    100% {
      transform: translateX(0%) scaleY(1);
      opacity: 0.9;
    }
  }

  .game-over-darkness {
    background: black;
    animation: darkness-consume 3s ease-in forwards;
  }

  .darkness-tentacle {
    background: linear-gradient(
      90deg,
      rgba(20, 0, 30, 0.95) 0%,
      rgba(40, 0, 60, 0.8) 50%,
      transparent 100%
    );
    animation: tentacle-creep 2s ease-out forwards;
  }

  .animate-game-over {
    animation: darkness-consume 3s ease-in forwards;
  }

  /* CLUE DISCOVERY - Revelation Effect */
  @keyframes clue-reveal {
    0% {
      transform: scale(0.8);
      opacity: 0;
      filter: blur(10px);
    }
    50% {
      transform: scale(1.1);
      opacity: 1;
      filter: blur(0);
    }
    100% {
      transform: scale(1);
      opacity: 1;
      filter: blur(0);
    }
  }

  @keyframes clue-glow-pulse {
    0%, 100% {
      box-shadow: 0 0 10px rgba(200, 180, 100, 0.4);
    }
    50% {
      box-shadow: 0 0 30px rgba(200, 180, 100, 0.8);
    }
  }

  .clue-revealing {
    animation: clue-reveal 0.8s ease-out forwards;
  }

  .clue-glow {
    animation: clue-glow-pulse 2s ease-in-out infinite;
  }

  .animate-clue-reveal {
    animation: clue-reveal 0.8s ease-out forwards;
  }

  /* LEVEL UP - Ascension Effect */
  @keyframes level-up-burst {
    0% {
      transform: scale(0);
      opacity: 1;
    }
    50% {
      transform: scale(1.5);
      opacity: 0.8;
    }
    100% {
      transform: scale(2.5);
      opacity: 0;
    }
  }

  @keyframes level-up-glow {
    0%, 100% {
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }
    50% {
      text-shadow: 0 0 30px rgba(255, 215, 0, 1);
    }
  }

  .level-up-burst {
    background: radial-gradient(
      circle,
      rgba(255, 215, 0, 0.8) 0%,
      rgba(255, 180, 50, 0.4) 50%,
      transparent 100%
    );
    animation: level-up-burst 1s ease-out forwards;
  }

  .level-up-text {
    animation: level-up-glow 1s ease-in-out;
  }

  .animate-level-up {
    animation: level-up-burst 1s ease-out forwards;
  }

  /* ============================================
     MONSTER PORTRAIT TRAIT ANIMATIONS
     ============================================ */

  /* FLYING - Floating/hovering effect */
  @keyframes monster-float {
    0%, 100% {
      transform: translateY(0) rotate(0deg);
    }
    25% {
      transform: translateY(-4px) rotate(0.5deg);
    }
    75% {
      transform: translateY(-2px) rotate(-0.5deg);
    }
  }

  .animate-float {
    animation: monster-float 3s ease-in-out infinite;
  }

  /* FIRE - Flickering flame effect */
  @keyframes fire-flicker {
    0%, 100% {
      filter: brightness(1) saturate(1);
      transform: scale(1);
    }
    25% {
      filter: brightness(1.2) saturate(1.3);
      transform: scale(1.02);
    }
    50% {
      filter: brightness(0.95) saturate(1.1);
      transform: scale(0.99);
    }
    75% {
      filter: brightness(1.15) saturate(1.2);
      transform: scale(1.01);
    }
  }

  .animate-fire-flicker {
    animation: fire-flicker 0.5s ease-in-out infinite;
  }

  .fire-overlay {
    background: linear-gradient(
      0deg,
      rgba(249, 115, 22, 0.4) 0%,
      rgba(239, 68, 68, 0.2) 30%,
      transparent 70%
    );
    animation: fire-overlay-pulse 0.8s ease-in-out infinite alternate;
  }

  @keyframes fire-overlay-pulse {
    0% { opacity: 0.6; }
    100% { opacity: 1; }
  }

  /* MASSIVE - Pulsing shadow effect */
  @keyframes massive-pulse {
    0%, 100% {
      transform: scale(1);
      filter: drop-shadow(0 4px 6px rgba(0,0,0,0.5));
    }
    50% {
      transform: scale(1.03);
      filter: drop-shadow(0 8px 12px rgba(0,0,0,0.7));
    }
  }

  .animate-massive-pulse {
    animation: massive-pulse 2s ease-in-out infinite;
  }

  /* FAST - Speed blur trail effect */
  @keyframes speed-blur {
    0%, 100% {
      filter: blur(0px);
      transform: translateX(0);
    }
    50% {
      filter: blur(0.5px);
      transform: translateX(1px);
    }
  }

  .animate-speed-blur {
    animation: speed-blur 0.3s ease-in-out infinite;
    position: relative;
  }

  .animate-speed-blur::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(90deg, transparent 0%, rgba(34, 197, 94, 0.1) 50%, transparent 100%);
    animation: speed-trail 0.5s ease-in-out infinite;
  }

  @keyframes speed-trail {
    0% { transform: translateX(-100%); opacity: 0; }
    50% { opacity: 0.5; }
    100% { transform: translateX(100%); opacity: 0; }
  }

  /* ELITE - Golden border glow */
  @keyframes elite-glow {
    0%, 100% {
      box-shadow: 
        0 0 10px rgba(212, 175, 55, 0.4),
        0 0 20px rgba(212, 175, 55, 0.2),
        inset 0 0 10px rgba(212, 175, 55, 0.1);
    }
    50% {
      box-shadow: 
        0 0 20px rgba(212, 175, 55, 0.6),
        0 0 40px rgba(212, 175, 55, 0.3),
        inset 0 0 15px rgba(212, 175, 55, 0.2);
    }
  }

  .animate-elite-glow {
    animation: elite-glow 2s ease-in-out infinite;
    border-radius: 0.75rem;
  }

  /* TELEPORT - Dimensional flickering */
  @keyframes dimensional-flicker {
    0%, 100% {
      opacity: 1;
      transform: scale(1) rotateY(0deg);
      filter: hue-rotate(0deg);
    }
    10% {
      opacity: 0.7;
      transform: scale(0.98) rotateY(2deg);
    }
    20% {
      opacity: 1;
      transform: scale(1.01) rotateY(-1deg);
    }
    30% {
      opacity: 0.5;
      transform: scale(0.97) rotateY(3deg);
      filter: hue-rotate(30deg);
    }
    40% {
      opacity: 1;
      transform: scale(1);
    }
  }

  .animate-dimensional-flicker {
    animation: dimensional-flicker 3s ease-in-out infinite;
  }

  .dimensional-overlay {
    background: radial-gradient(
      circle at center,
      rgba(168, 85, 247, 0.2) 0%,
      transparent 70%
    );
    animation: dimensional-pulse 1.5s ease-in-out infinite alternate;
  }

  @keyframes dimensional-pulse {
    0% { opacity: 0.3; transform: scale(0.9); }
    100% { opacity: 0.7; transform: scale(1.1); }
  }

  /* AQUATIC - Water ripple effect */
  @keyframes water-ripple {
    0%, 100% {
      transform: translateY(0);
      filter: brightness(1);
    }
    25% {
      transform: translateY(-1px);
      filter: brightness(1.05);
    }
    50% {
      transform: translateY(1px);
      filter: brightness(0.98);
    }
    75% {
      transform: translateY(-0.5px);
      filter: brightness(1.02);
    }
  }

  .animate-water-ripple {
    animation: water-ripple 2s ease-in-out infinite;
    position: relative;
  }

  .animate-water-ripple::before {
    content: '';
    position: absolute;
    inset: -2px;
    border-radius: inherit;
    background: linear-gradient(135deg, transparent 30%, rgba(34, 211, 238, 0.3) 50%, transparent 70%);
    animation: water-shimmer 2s linear infinite;
  }

  @keyframes water-shimmer {
    0% { transform: translateX(-100%) rotate(45deg); }
    100% { transform: translateX(100%) rotate(45deg); }
  }

  /* REGENERATE - Green healing pulse */
  @keyframes regen-pulse {
    0%, 100% {
      filter: brightness(1);
    }
    50% {
      filter: brightness(1.1) saturate(1.2);
    }
  }

  .animate-regen-pulse {
    animation: regen-pulse 1.5s ease-in-out infinite;
  }

  .regen-overlay {
    background: radial-gradient(
      circle at center,
      rgba(34, 197, 94, 0.3) 0%,
      rgba(34, 197, 94, 0.1) 40%,
      transparent 70%
    );
    animation: regen-wave 2s ease-in-out infinite;
  }

  @keyframes regen-wave {
    0% { transform: scale(0.8); opacity: 0.8; }
    50% { transform: scale(1.1); opacity: 0.4; }
    100% { transform: scale(0.8); opacity: 0.8; }
  }

  /* AMBUSHER - Shadow lurking effect */
  @keyframes lurk {
    0%, 100% {
      filter: brightness(0.8);
      transform: scale(1);
    }
    50% {
      filter: brightness(0.6);
      transform: scale(0.98);
    }
  }

  .animate-lurk {
    animation: lurk 3s ease-in-out infinite;
  }

  .shadow-overlay {
    background: radial-gradient(
      ellipse at bottom,
      rgba(0, 0, 0, 0.5) 0%,
      transparent 70%
    );
  }

  /* RANGED - Targeting reticle */
  .targeting-overlay {
    background: 
      radial-gradient(circle at center, transparent 20%, rgba(239, 68, 68, 0.1) 25%, transparent 30%),
      linear-gradient(0deg, transparent 48%, rgba(239, 68, 68, 0.2) 49%, rgba(239, 68, 68, 0.2) 51%, transparent 52%),
      linear-gradient(90deg, transparent 48%, rgba(239, 68, 68, 0.2) 49%, rgba(239, 68, 68, 0.2) 51%, transparent 52%);
  }

  /* SWARM - Jittery movement */
  @keyframes swarm-jitter {
    0%, 100% { transform: translate(0, 0); }
    10% { transform: translate(-1px, 1px); }
    20% { transform: translate(1px, -1px); }
    30% { transform: translate(-1px, -1px); }
    40% { transform: translate(1px, 1px); }
    50% { transform: translate(0, -1px); }
    60% { transform: translate(-1px, 0); }
    70% { transform: translate(1px, 0); }
    80% { transform: translate(0, 1px); }
    90% { transform: translate(-1px, 1px); }
  }

  .animate-swarm-jitter {
    animation: swarm-jitter 0.5s ease-in-out infinite;
  }

  /* SCAVENGER - Sniffing/searching motion */
  @keyframes scavenger-sniff {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(2deg); }
    50% { transform: rotate(-1deg); }
    75% { transform: rotate(1deg); }
  }

  .animate-scavenger-sniff {
    animation: scavenger-sniff 2s ease-in-out infinite;
  }

  /* SLOW - Lumbering movement */
  @keyframes slow-lumber {
    0%, 100% {
      transform: translateY(0) scale(1);
    }
    50% {
      transform: translateY(2px) scale(1.01);
    }
  }

  .animate-slow-lumber {
    animation: slow-lumber 3s ease-in-out infinite;
  }

  /* LIGHT SENSITIVE - Darkness shroud */
  .darkness-overlay {
    background: radial-gradient(
      circle at center,
      transparent 30%,
      rgba(17, 24, 39, 0.6) 100%
    );
  }

  /* ==========================================================================
     TILE ANIMATION SYSTEM - "The Living Board"
     Category-based atmospheric effects for game tiles
     ========================================================================== */

  /* --------------------------------------------------------------------------
     SUPERNATURAL TILES - Eldritch glow and pulsing
     For: Portals, ritual chambers, occult sites
     -------------------------------------------------------------------------- */
  @keyframes eldritch-pulse {
    0%, 100% {
      filter: brightness(1) hue-rotate(0deg);
      box-shadow: inset 0 0 20px hsla(280, 60%, 40%, 0.2);
    }
    50% {
      filter: brightness(1.08) hue-rotate(5deg);
      box-shadow: inset 0 0 40px hsla(280, 60%, 50%, 0.4);
    }
  }

  .tile-animate-eldritch {
    animation: eldritch-pulse 4s ease-in-out infinite;
  }

  .tile-glow-eldritch {
    box-shadow: 
      inset 0 0 30px hsla(280, 50%, 35%, 0.3),
      0 0 15px hsla(280, 60%, 40%, 0.2);
  }

  .tile-overlay-eldritch {
    background: radial-gradient(
      ellipse at center,
      hsla(280, 60%, 50%, 0.15) 0%,
      hsla(300, 50%, 40%, 0.1) 40%,
      transparent 70%
    );
    animation: eldritch-overlay 5s ease-in-out infinite;
  }

  @keyframes eldritch-overlay {
    0%, 100% { opacity: 0.6; transform: scale(1); }
    50% { opacity: 1; transform: scale(1.05); }
  }

  .tile-image-eldritch {
    animation: eldritch-image-pulse 4s ease-in-out infinite;
  }

  @keyframes eldritch-image-pulse {
    0%, 100% { filter: saturate(1) brightness(1); }
    50% { filter: saturate(1.15) brightness(1.05); }
  }

  /* --------------------------------------------------------------------------
     OUTDOOR TILES - Subtle wind/atmosphere
     For: Streets, parks, cemetery, courtyards
     -------------------------------------------------------------------------- */
  @keyframes outdoor-breeze {
    0%, 100% {
      transform: translateX(0);
    }
    25% {
      transform: translateX(0.5px);
    }
    75% {
      transform: translateX(-0.5px);
    }
  }

  .tile-animate-outdoor {
    animation: outdoor-breeze 8s ease-in-out infinite;
  }

  .tile-overlay-wind {
    background: linear-gradient(
      90deg,
      transparent 0%,
      hsla(200, 30%, 60%, 0.03) 30%,
      hsla(200, 30%, 60%, 0.05) 50%,
      hsla(200, 30%, 60%, 0.03) 70%,
      transparent 100%
    );
    animation: wind-sweep 10s linear infinite;
  }

  @keyframes wind-sweep {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }

  .tile-image-outdoor {
    animation: outdoor-subtle 12s ease-in-out infinite;
  }

  @keyframes outdoor-subtle {
    0%, 100% { filter: brightness(1); }
    50% { filter: brightness(1.02); }
  }

  /* --------------------------------------------------------------------------
     WATER TILES - Rippling reflections
     For: Harbors, docks, sewers, cisterns
     -------------------------------------------------------------------------- */
  @keyframes water-tile-ripple {
    0%, 100% {
      transform: scaleY(1);
      filter: brightness(1);
    }
    25% {
      filter: brightness(1.03);
    }
    50% {
      transform: scaleY(1.002);
      filter: brightness(0.98);
    }
    75% {
      filter: brightness(1.02);
    }
  }

  .tile-animate-water {
    animation: water-tile-ripple 3s ease-in-out infinite;
  }

  .tile-glow-water {
    box-shadow: inset 0 0 25px hsla(200, 50%, 40%, 0.2);
  }

  .tile-overlay-water {
    background: 
      radial-gradient(ellipse at 30% 40%, hsla(200, 60%, 60%, 0.1) 0%, transparent 50%),
      radial-gradient(ellipse at 70% 60%, hsla(200, 60%, 60%, 0.08) 0%, transparent 50%);
    animation: water-light-dance 4s ease-in-out infinite;
  }

  @keyframes water-light-dance {
    0%, 100% { 
      opacity: 0.7;
      transform: translateX(0) translateY(0);
    }
    25% {
      opacity: 0.9;
      transform: translateX(2px) translateY(-1px);
    }
    50% {
      opacity: 0.6;
      transform: translateX(-1px) translateY(1px);
    }
    75% {
      opacity: 0.85;
      transform: translateX(1px) translateY(-2px);
    }
  }

  .tile-image-water {
    animation: water-image-shimmer 5s ease-in-out infinite;
  }

  @keyframes water-image-shimmer {
    0%, 100% { filter: saturate(1) contrast(1); }
    50% { filter: saturate(1.1) contrast(1.03); }
  }

  /* --------------------------------------------------------------------------
     UNDERGROUND TILES - Creeping mist
     For: Crypts, tunnels, basements, caves
     -------------------------------------------------------------------------- */
  @keyframes underground-mist {
    0%, 100% {
      opacity: 0.4;
      transform: translateY(10%);
    }
    50% {
      opacity: 0.7;
      transform: translateY(-5%);
    }
  }

  .tile-animate-underground {
    position: relative;
  }

  .tile-overlay-mist {
    background: linear-gradient(
      0deg,
      hsla(230, 20%, 50%, 0.2) 0%,
      hsla(230, 20%, 50%, 0.1) 30%,
      transparent 60%
    );
    animation: underground-mist 8s ease-in-out infinite;
  }

  .tile-image-underground {
    animation: underground-flicker 10s ease-in-out infinite;
  }

  @keyframes underground-flicker {
    0%, 90%, 100% { filter: brightness(1); }
    92% { filter: brightness(0.9); }
    94% { filter: brightness(1.05); }
    96% { filter: brightness(0.95); }
  }

  /* --------------------------------------------------------------------------
     CHURCH TILES - Divine light rays
     For: Churches, chapels, shrines
     -------------------------------------------------------------------------- */
  @keyframes divine-light {
    0%, 100% {
      opacity: 0.2;
      transform: scaleY(1);
    }
    50% {
      opacity: 0.4;
      transform: scaleY(1.02);
    }
  }

  .tile-animate-church {
    animation: divine-light 6s ease-in-out infinite;
  }

  .tile-glow-divine {
    box-shadow: inset 0 0 30px hsla(45, 80%, 60%, 0.15);
  }

  .tile-overlay-divine {
    background: linear-gradient(
      180deg,
      hsla(45, 90%, 70%, 0.12) 0%,
      hsla(45, 80%, 60%, 0.05) 50%,
      transparent 100%
    );
    animation: divine-rays 5s ease-in-out infinite;
  }

  @keyframes divine-rays {
    0%, 100% { opacity: 0.6; }
    50% { opacity: 1; }
  }

  .tile-image-church {
    animation: church-glow 6s ease-in-out infinite;
  }

  @keyframes church-glow {
    0%, 100% { filter: brightness(1) saturate(1); }
    50% { filter: brightness(1.06) saturate(1.1); }
  }

  /* --------------------------------------------------------------------------
     LABORATORY TILES - Electric sparks
     For: Labs, morgues, experiments
     -------------------------------------------------------------------------- */
  @keyframes electric-flicker {
    0%, 90%, 100% { 
      filter: brightness(1);
      box-shadow: inset 0 0 10px hsla(200, 80%, 50%, 0.1);
    }
    92% { 
      filter: brightness(1.15);
      box-shadow: inset 0 0 20px hsla(200, 80%, 60%, 0.3);
    }
    94% { 
      filter: brightness(0.95);
      box-shadow: inset 0 0 10px hsla(200, 80%, 50%, 0.1);
    }
    96% { 
      filter: brightness(1.1);
      box-shadow: inset 0 0 15px hsla(200, 80%, 60%, 0.25);
    }
  }

  .tile-animate-laboratory {
    animation: electric-flicker 4s ease-in-out infinite;
  }

  .tile-glow-electric {
    box-shadow: inset 0 0 20px hsla(200, 70%, 50%, 0.15);
  }

  .tile-overlay-electric {
    background: 
      radial-gradient(circle at 20% 30%, hsla(180, 80%, 60%, 0.1) 0%, transparent 30%),
      radial-gradient(circle at 80% 70%, hsla(140, 70%, 50%, 0.08) 0%, transparent 30%);
    animation: electric-shimmer 3s ease-in-out infinite alternate;
  }

  @keyframes electric-shimmer {
    0% { opacity: 0.5; }
    100% { opacity: 1; }
  }

  .tile-image-laboratory {
    animation: lab-hum 4s ease-in-out infinite;
  }

  @keyframes lab-hum {
    0%, 100% { filter: brightness(1) hue-rotate(0deg); }
    50% { filter: brightness(1.03) hue-rotate(2deg); }
  }

  /* --------------------------------------------------------------------------
     NATURE TILES - Wind through trees
     For: Forests, clearings, moors
     -------------------------------------------------------------------------- */
  @keyframes nature-sway {
    0%, 100% {
      transform: rotate(0deg) translateX(0);
    }
    25% {
      transform: rotate(0.2deg) translateX(0.3px);
    }
    75% {
      transform: rotate(-0.2deg) translateX(-0.3px);
    }
  }

  .tile-animate-nature {
    animation: nature-sway 6s ease-in-out infinite;
  }

  .tile-image-nature {
    animation: nature-rustle 8s ease-in-out infinite;
  }

  @keyframes nature-rustle {
    0%, 100% { filter: brightness(1) contrast(1); }
    33% { filter: brightness(1.02) contrast(1.01); }
    66% { filter: brightness(0.99) contrast(1); }
  }

  /* --------------------------------------------------------------------------
     INTERIOR TILES - Candlelight flicker
     For: Studies, libraries, bedrooms, parlors
     -------------------------------------------------------------------------- */
  @keyframes candle-flicker {
    0%, 100% {
      box-shadow: inset 0 0 20px hsla(35, 80%, 50%, 0.1);
    }
    20% {
      box-shadow: inset 0 0 25px hsla(35, 80%, 55%, 0.15);
    }
    40% {
      box-shadow: inset 0 0 18px hsla(35, 80%, 45%, 0.08);
    }
    60% {
      box-shadow: inset 0 0 22px hsla(35, 80%, 52%, 0.12);
    }
    80% {
      box-shadow: inset 0 0 20px hsla(35, 80%, 48%, 0.1);
    }
  }

  .tile-animate-interior {
    animation: candle-flicker 3s ease-in-out infinite;
  }

  .tile-glow-candle {
    box-shadow: inset 0 0 25px hsla(35, 70%, 45%, 0.12);
  }

  .tile-overlay-candle {
    background: radial-gradient(
      ellipse at 50% 30%,
      hsla(35, 80%, 60%, 0.1) 0%,
      hsla(35, 70%, 50%, 0.05) 40%,
      transparent 70%
    );
    animation: candle-dance 4s ease-in-out infinite;
  }

  @keyframes candle-dance {
    0%, 100% { opacity: 0.7; transform: translateY(0); }
    50% { opacity: 1; transform: translateY(-1px); }
  }

  .tile-image-interior {
    animation: interior-warmth 5s ease-in-out infinite;
  }

  @keyframes interior-warmth {
    0%, 100% { filter: brightness(1) sepia(0); }
    50% { filter: brightness(1.02) sepia(0.03); }
  }
}
